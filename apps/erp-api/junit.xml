<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="jest tests" tests="633" failures="250" errors="0" time="16.22">
  <testsuite name="Profile routes" errors="0" failures="14" skipped="0" timestamp="2025-08-19T18:25:13" time="1.336" tests="18">
    <testcase classname="Profile routes Authentication and Authorization should refuse access without token" name="Profile routes Authentication and Authorization should refuse access without token" time="0.056">
    </testcase>
    <testcase classname="Profile routes Authentication and Authorization should refuse access if not own profile" name="Profile routes Authentication and Authorization should refuse access if not own profile" time="0.004">
    </testcase>
    <testcase classname="Profile routes Authentication and Authorization should allow access if own profile" name="Profile routes Authentication and Authorization should allow access if own profile" time="0.004">
    </testcase>
    <testcase classname="Profile routes Authentication and Authorization should allow access for any authenticated role" name="Profile routes Authentication and Authorization should allow access for any authenticated role" time="0.013">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/profile.route.test.js:81:28)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Profile routes Profile routes with User-Profile relationship should handle GET /profile/me with populated profile data" name="Profile routes Profile routes with User-Profile relationship should handle GET /profile/me with populated profile data" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/profile.route.test.js:129:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Profile routes Profile routes with User-Profile relationship should handle PUT /profile/me with profile update" name="Profile routes Profile routes with User-Profile relationship should handle PUT /profile/me with profile update" time="0.012">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/profile.route.test.js:178:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Profile routes Profile routes with User-Profile relationship should handle GET /:userId with own profile access" name="Profile routes Profile routes with User-Profile relationship should handle GET /:userId with own profile access" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/profile.route.test.js:226:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Profile routes Profile routes with User-Profile relationship should handle PUT /:userId with own profile update" name="Profile routes Profile routes with User-Profile relationship should handle PUT /:userId with own profile update" time="0.004">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/profile.route.test.js:272:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Profile routes Account management routes should handle PUT /account/password" name="Profile routes Account management routes should handle PUT /account/password" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/profile.route.test.js:304:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Profile routes Account management routes should handle PUT /account/email" name="Profile routes Account management routes should handle PUT /account/email" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/profile.route.test.js:333:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Profile routes Data validation and error handling should validate profile update data" name="Profile routes Data validation and error handling should validate profile update data" time="0.003">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 400
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/profile.route.test.js:362:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Profile routes Data validation and error handling should validate password strength" name="Profile routes Data validation and error handling should validate password strength" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 400
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/profile.route.test.js:388:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Profile routes Data validation and error handling should validate email format" name="Profile routes Data validation and error handling should validate email format" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 400
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/profile.route.test.js:414:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Profile routes Data validation and error handling should handle malformed JSON" name="Profile routes Data validation and error handling should handle malformed JSON" time="0.002">
    </testcase>
    <testcase classname="Profile routes Data validation and error handling should handle empty request body" name="Profile routes Data validation and error handling should handle empty request body" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 400
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/profile.route.test.js:444:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Profile routes User-Profile relationship testing should handle case when user has no profile" name="Profile routes User-Profile relationship testing should handle case when user has no profile" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 404
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/profile.route.test.js:468:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Profile routes User-Profile relationship testing should handle case when user is not found" name="Profile routes User-Profile relationship testing should handle case when user is not found" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 404
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/profile.route.test.js:491:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Profile routes User-Profile relationship testing should update both user and profile meta information" name="Profile routes User-Profile relationship testing should update both user and profile meta information" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/profile.route.test.js:534:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Guide routes" errors="0" failures="11" skipped="0" timestamp="2025-08-19T18:25:13" time="1.336" tests="12">
    <testcase classname="Guide routes Authentication and Authorization should refuse access without token" name="Guide routes Authentication and Authorization should refuse access without token" time="0.03">
    </testcase>
    <testcase classname="Guide routes Authentication and Authorization should refuse access with wrong role" name="Guide routes Authentication and Authorization should refuse access with wrong role" time="0.003">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 403
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/guide.route.test.js:35:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Guide routes Authentication and Authorization should allow access with correct role" name="Guide routes Authentication and Authorization should allow access with correct role" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/guide.route.test.js:48:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Guide routes Journey routes should handle GET /journeys" name="Guide routes Journey routes should handle GET /journeys" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/guide.route.test.js:63:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Guide routes Journey routes should handle GET /journeys/:id" name="Guide routes Journey routes should handle GET /journeys/:id" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/guide.route.test.js:76:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Guide routes Journey routes should handle PUT /journeys/:id/status" name="Guide routes Journey routes should handle PUT /journeys/:id/status" time="0.006">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/guide.route.test.js:90:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Guide routes Journey routes should handle POST /journeys/:id/notes" name="Guide routes Journey routes should handle POST /journeys/:id/notes" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/guide.route.test.js:104:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Guide routes Booking routes should handle GET /bookings" name="Guide routes Booking routes should handle GET /bookings" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/guide.route.test.js:119:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Guide routes Booking routes should handle GET /bookings/:id" name="Guide routes Booking routes should handle GET /bookings/:id" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/guide.route.test.js:132:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Guide routes Booking routes should handle PUT /bookings/:id/status" name="Guide routes Booking routes should handle PUT /bookings/:id/status" time="0.003">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/guide.route.test.js:146:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Guide routes Schedule and Availability routes should handle GET /schedule" name="Guide routes Schedule and Availability routes should handle GET /schedule" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/guide.route.test.js:161:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Guide routes Schedule and Availability routes should handle PUT /availability" name="Guide routes Schedule and Availability routes should handle PUT /availability" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/guide.route.test.js:175:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Shared routes" errors="0" failures="13" skipped="0" timestamp="2025-08-19T18:25:14" time="0.211" tests="15">
    <testcase classname="Shared routes Authentication and Authorization should refuse access without token" name="Shared routes Authentication and Authorization should refuse access without token" time="0.004">
    </testcase>
    <testcase classname="Shared routes Authentication and Authorization should allow access with valid token" name="Shared routes Authentication and Authorization should allow access with valid token" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/shared.route.test.js:35:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Shared routes Authentication and Authorization should allow access for any authenticated role" name="Shared routes Authentication and Authorization should allow access for any authenticated role" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/shared.route.test.js:51:28)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Shared routes Profile routes should handle GET /profile/me" name="Shared routes Profile routes should handle GET /profile/me" time="0.003">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/shared.route.test.js:67:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Shared routes Profile routes should handle PUT /profile/me" name="Shared routes Profile routes should handle PUT /profile/me" time="0.004">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/shared.route.test.js:81:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Shared routes Account management routes should handle PUT /account/password" name="Shared routes Account management routes should handle PUT /account/password" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/shared.route.test.js:100:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Shared routes Account management routes should handle PUT /account/email" name="Shared routes Account management routes should handle PUT /account/email" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/shared.route.test.js:117:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Shared routes Profile with user ID routes should refuse access if not own profile" name="Shared routes Profile with user ID routes should refuse access if not own profile" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 403
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/shared.route.test.js:132:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Shared routes Profile with user ID routes should allow access if own profile" name="Shared routes Profile with user ID routes should allow access if own profile" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/shared.route.test.js:146:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Shared routes Profile with user ID routes should handle PUT /:userId" name="Shared routes Profile with user ID routes should handle PUT /:userId" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/shared.route.test.js:161:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Shared routes Data validation should validate profile update data" name="Shared routes Data validation should validate profile update data" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 400
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/shared.route.test.js:178:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Shared routes Data validation should validate password change data" name="Shared routes Data validation should validate password change data" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 400
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/shared.route.test.js:196:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Shared routes Data validation should validate email format" name="Shared routes Data validation should validate email format" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 400
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/shared.route.test.js:214:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Shared routes Error handling should handle malformed JSON" name="Shared routes Error handling should handle malformed JSON" time="0.001">
    </testcase>
    <testcase classname="Shared routes Error handling should handle empty request body" name="Shared routes Error handling should handle empty request body" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 400
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/shared.route.test.js:245:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Admin routes" errors="0" failures="40" skipped="0" timestamp="2025-08-19T18:25:14" time="0.257" tests="40">
    <testcase classname="Admin routes Authentication and Authorization should allow access with correct role" name="Admin routes Authentication and Authorization should allow access with correct role" time="0.007">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:103:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes User management routes should handle GET /users" name="Admin routes User management routes should handle GET /users" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:118:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes User management routes should handle GET /users/:id" name="Admin routes User management routes should handle GET /users/:id" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:124:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes User management routes should handle POST /users" name="Admin routes User management routes should handle POST /users" time="0.004">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:131:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes User management routes should handle PUT /users/:id" name="Admin routes User management routes should handle PUT /users/:id" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:137:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes User management routes should handle DELETE /users/:id" name="Admin routes User management routes should handle DELETE /users/:id" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:143:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes User management routes should handle POST /users/:id/status" name="Admin routes User management routes should handle POST /users/:id/status" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:149:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes User management routes should handle POST /users/:id/role" name="Admin routes User management routes should handle POST /users/:id/role" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:155:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Profile management routes should handle GET /profiles" name="Admin routes Profile management routes should handle GET /profiles" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:171:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Profile management routes should handle GET /profiles/:id" name="Admin routes Profile management routes should handle GET /profiles/:id" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:177:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Profile management routes should handle PUT /profiles/:id" name="Admin routes Profile management routes should handle PUT /profiles/:id" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:183:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Profile management routes should handle DELETE /profiles/:id" name="Admin routes Profile management routes should handle DELETE /profiles/:id" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:189:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Profile management routes should handle POST /profiles/:id/restore" name="Admin routes Profile management routes should handle POST /profiles/:id/restore" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:195:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Profile management routes should handle GET /profiles/stats" name="Admin routes Profile management routes should handle GET /profiles/stats" time="0.003">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:201:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Booking management routes should handle GET /bookings" name="Admin routes Booking management routes should handle GET /bookings" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:217:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Booking management routes should handle GET /bookings/:id" name="Admin routes Booking management routes should handle GET /bookings/:id" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:223:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Booking management routes should handle POST /bookings" name="Admin routes Booking management routes should handle POST /bookings" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:230:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Booking management routes should handle PUT /bookings/:id" name="Admin routes Booking management routes should handle PUT /bookings/:id" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:236:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Booking management routes should handle DELETE /bookings/:id" name="Admin routes Booking management routes should handle DELETE /bookings/:id" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:242:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Booking management routes should handle GET /bookings/stats" name="Admin routes Booking management routes should handle GET /bookings/stats" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:248:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Journey management routes should handle GET /journeys" name="Admin routes Journey management routes should handle GET /journeys" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:264:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Journey management routes should handle GET /journeys/:id" name="Admin routes Journey management routes should handle GET /journeys/:id" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:270:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Journey management routes should handle POST /journeys" name="Admin routes Journey management routes should handle POST /journeys" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:277:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Journey management routes should handle PUT /journeys/:id" name="Admin routes Journey management routes should handle PUT /journeys/:id" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:283:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Journey management routes should handle DELETE /journeys/:id" name="Admin routes Journey management routes should handle DELETE /journeys/:id" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:289:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Journey management routes should handle POST /journeys/:id/assign-guide" name="Admin routes Journey management routes should handle POST /journeys/:id/assign-guide" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:295:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Journey management routes should handle GET /journeys/stats" name="Admin routes Journey management routes should handle GET /journeys/stats" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:301:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Provider management routes should handle GET /providers" name="Admin routes Provider management routes should handle GET /providers" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:317:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Provider management routes should handle GET /providers/:id" name="Admin routes Provider management routes should handle GET /providers/:id" time="0">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:323:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Provider management routes should handle POST /providers" name="Admin routes Provider management routes should handle POST /providers" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:330:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Provider management routes should handle PUT /providers/:id" name="Admin routes Provider management routes should handle PUT /providers/:id" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:336:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Provider management routes should handle DELETE /providers/:id" name="Admin routes Provider management routes should handle DELETE /providers/:id" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:342:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Provider management routes should handle POST /providers/:id/restore" name="Admin routes Provider management routes should handle POST /providers/:id/restore" time="0.003">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:348:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Provider management routes should handle GET /providers/stats" name="Admin routes Provider management routes should handle GET /providers/stats" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:354:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes Provider management routes should handle GET /providers/search" name="Admin routes Provider management routes should handle GET /providers/search" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:360:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes System management routes should handle GET /system/stats" name="Admin routes System management routes should handle GET /system/stats" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:376:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes System management routes should handle GET /system/health" name="Admin routes System management routes should handle GET /system/health" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:382:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes System management routes should handle GET /system/logs" name="Admin routes System management routes should handle GET /system/logs" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:388:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes System management routes should handle POST /system/backup" name="Admin routes System management routes should handle POST /system/backup" time="0.003">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:394:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Admin routes System management routes should handle POST /system/restore" name="Admin routes System management routes should handle POST /system/restore" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 401
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/admin.route.test.js:400:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Journey Model" errors="0" failures="2" skipped="0" timestamp="2025-08-19T18:25:15" time="0.402" tests="31">
    <testcase classname="Journey Model Schema Definition should create a journey with required fields" name="Journey Model Schema Definition should create a journey with required fields" time="0.032">
    </testcase>
    <testcase classname="Journey Model Schema Definition should set default values correctly" name="Journey Model Schema Definition should set default values correctly" time="0.011">
    </testcase>
    <testcase classname="Journey Model Validation should require name" name="Journey Model Validation should require name" time="0.007">
    </testcase>
    <testcase classname="Journey Model Validation should require description" name="Journey Model Validation should require description" time="0.004">
    </testcase>
    <testcase classname="Journey Model Validation should require category" name="Journey Model Validation should require category" time="0.004">
    </testcase>
    <testcase classname="Journey Model Validation should validate category enum" name="Journey Model Validation should validate category enum" time="0.005">
    </testcase>
    <testcase classname="Journey Model Validation should validate type enum" name="Journey Model Validation should validate type enum" time="0.004">
    </testcase>
    <testcase classname="Journey Model Validation should require duration" name="Journey Model Validation should require duration" time="0.004">
    </testcase>
    <testcase classname="Journey Model Validation should validate duration minimum values" name="Journey Model Validation should validate duration minimum values" time="0.006">
    </testcase>
    <testcase classname="Journey Model Validation should require destinations" name="Journey Model Validation should require destinations" time="0.005">
    </testcase>
    <testcase classname="Journey Model Validation should require pricing" name="Journey Model Validation should require pricing" time="0.005">
    </testcase>
    <testcase classname="Journey Model Validation should validate pricing minimum value" name="Journey Model Validation should validate pricing minimum value" time="0.004">
    </testcase>
    <testcase classname="Journey Model Validation should validate currency enum" name="Journey Model Validation should validate currency enum" time="0.004">
    </testcase>
    <testcase classname="Journey Model Validation should require capacity" name="Journey Model Validation should require capacity" time="0.004">
    </testcase>
    <testcase classname="Journey Model Validation should validate capacity minimum value" name="Journey Model Validation should validate capacity minimum value" time="0.005">
    </testcase>
    <testcase classname="Journey Model Validation should require schedule" name="Journey Model Validation should require schedule" time="0.004">
    </testcase>
    <testcase classname="Journey Model Virtuals should calculate average rating correctly" name="Journey Model Virtuals should calculate average rating correctly" time="0.005">
    </testcase>
    <testcase classname="Journey Model Virtuals should calculate review count correctly" name="Journey Model Virtuals should calculate review count correctly" time="0.005">
    </testcase>
    <testcase classname="Journey Model Virtuals should check availability correctly" name="Journey Model Virtuals should check availability correctly" time="0.005">
    </testcase>
    <testcase classname="Journey Model Virtuals should calculate remaining spots correctly" name="Journey Model Virtuals should calculate remaining spots correctly" time="0.005">
    </testcase>
    <testcase classname="Journey Model Instance Methods should add review correctly" name="Journey Model Instance Methods should add review correctly" time="0.008">
      <failure>VersionError: No matching document found for id &quot;68a4c18bae586e8c26b71f6a&quot; version 0 modifiedPaths &quot;reviews&quot;
    at generateVersionError (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/model.js:571:10)
    at model.save (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/model.js:629:28)
    at model.save [as addReview] (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/models/Journey.js:453:15)
    at Object.addReview (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/models/__test__/journey.model.test.js:791:21)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Journey Model Instance Methods should update capacity correctly" name="Journey Model Instance Methods should update capacity correctly" time="0.009">
    </testcase>
    <testcase classname="Journey Model Instance Methods should not allow negative bookings" name="Journey Model Instance Methods should not allow negative bookings" time="0.016">
    </testcase>
    <testcase classname="Journey Model Static Methods should get featured journeys" name="Journey Model Static Methods should get featured journeys" time="0.017">
      <failure>Error: expect(received).toHaveLength(expected)

Expected length: 1
Received length: 0
Received array:  []
    at Object.toHaveLength (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/models/__test__/journey.model.test.js:953:32)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Journey Model Static Methods should get popular journeys" name="Journey Model Static Methods should get popular journeys" time="0.015">
    </testcase>
    <testcase classname="Journey Model Pre-save Middleware should update meta timestamps and version" name="Journey Model Pre-save Middleware should update meta timestamps and version" time="0.007">
    </testcase>
    <testcase classname="Journey Model Pre-save Middleware should generate slug if not provided" name="Journey Model Pre-save Middleware should generate slug if not provided" time="0.006">
    </testcase>
    <testcase classname="Journey Model Pre-find Middleware should exclude deleted records by default" name="Journey Model Pre-find Middleware should exclude deleted records by default" time="0.007">
    </testcase>
    <testcase classname="Journey Model Pre-find Middleware should include deleted records when explicitly requested" name="Journey Model Pre-find Middleware should include deleted records when explicitly requested" time="0.008">
    </testcase>
    <testcase classname="Journey Model Edge Cases should handle complex nested objects" name="Journey Model Edge Cases should handle complex nested objects" time="0.009">
    </testcase>
    <testcase classname="Journey Model Edge Cases should handle missing optional fields gracefully" name="Journey Model Edge Cases should handle missing optional fields gracefully" time="0.006">
    </testcase>
  </testsuite>
  <testsuite name="Provider Model" errors="0" failures="3" skipped="0" timestamp="2025-08-19T18:25:15" time="0.325" tests="29">
    <testcase classname="Provider Model Schema Definition should create a provider with required fields" name="Provider Model Schema Definition should create a provider with required fields" time="0.034">
    </testcase>
    <testcase classname="Provider Model Schema Definition should set default values correctly" name="Provider Model Schema Definition should set default values correctly" time="0.004">
    </testcase>
    <testcase classname="Provider Model Validation should require name" name="Provider Model Validation should require name" time="0.004">
    </testcase>
    <testcase classname="Provider Model Validation should require legalName" name="Provider Model Validation should require legalName" time="0.004">
    </testcase>
    <testcase classname="Provider Model Validation should require type" name="Provider Model Validation should require type" time="0.003">
    </testcase>
    <testcase classname="Provider Model Validation should validate type enum" name="Provider Model Validation should validate type enum" time="0.002">
    </testcase>
    <testcase classname="Provider Model Validation should validate category enum" name="Provider Model Validation should validate category enum" time="0.004">
    </testcase>
    <testcase classname="Provider Model Validation should require primary contact information" name="Provider Model Validation should require primary contact information" time="0.002">
    </testcase>
    <testcase classname="Provider Model Validation should require address information" name="Provider Model Validation should require address information" time="0.003">
    </testcase>
    <testcase classname="Provider Model Validation should validate email format" name="Provider Model Validation should validate email format" time="0.003">
    </testcase>
    <testcase classname="Provider Model Validation should reject invalid ratings" name="Provider Model Validation should reject invalid ratings" time="0.017">
    </testcase>
    <testcase classname="Provider Model Validation should update capacity correctly" name="Provider Model Validation should update capacity correctly" time="0.006">
    </testcase>
    <testcase classname="Provider Model Virtuals should generate full address" name="Provider Model Virtuals should generate full address" time="0.005">
    </testcase>
    <testcase classname="Provider Model Virtuals should format average rating" name="Provider Model Virtuals should format average rating" time="0.005">
    </testcase>
    <testcase classname="Provider Model Virtuals should check availability" name="Provider Model Virtuals should check availability" time="0.004">
    </testcase>
    <testcase classname="Provider Model Instance Methods should add rating correctly" name="Provider Model Instance Methods should add rating correctly" time="0.005">
    </testcase>
    <testcase classname="Provider Model Instance Methods should reject invalid ratings" name="Provider Model Instance Methods should reject invalid ratings" time="0.004">
    </testcase>
    <testcase classname="Provider Model Instance Methods should update capacity correctly" name="Provider Model Instance Methods should update capacity correctly" time="0.004">
    </testcase>
    <testcase classname="Provider Model Static Methods should get verified providers" name="Provider Model Static Methods should get verified providers" time="0.02">
      <failure>Error: expect(received).toHaveLength(expected)

Expected length: 2
Received length: 0
Received array:  []
    at Object.toHaveLength (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/models/__test__/provider.model.test.js:583:33)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Provider Model Static Methods should get providers by type" name="Provider Model Static Methods should get providers by type" time="0.008">
    </testcase>
    <testcase classname="Provider Model Static Methods should exclude deleted records by default" name="Provider Model Static Methods should exclude deleted records by default" time="0.009">
      <failure>Error: expect(received).toHaveLength(expected)

Expected length: 3
Received length: 4
Received array:  [{&quot;__v&quot;: 0, &quot;_id&quot;: &quot;68a4c18bae586e8c26b71f9e&quot;, &quot;address&quot;: {&quot;city&quot;: &quot;Test City&quot;, &quot;country&quot;: &quot;Test Country&quot;, &quot;street&quot;: &quot;123 Test Street&quot;}, &quot;averageRatingFormatted&quot;: &quot;0.0&quot;, &quot;capacity&quot;: {&quot;currentBookings&quot;: 0}, &quot;category&quot;: &quot;standard&quot;, &quot;certifications&quot;: [], &quot;contact&quot;: {&quot;primaryContact&quot;: {&quot;email&quot;: &quot;john@testprovider.com&quot;, &quot;name&quot;: &quot;John Doe&quot;, &quot;phone&quot;: &quot;+1234567890&quot;}}, &quot;contract&quot;: {&quot;autoRenew&quot;: false, &quot;isActive&quot;: true}, &quot;createdAt&quot;: 2025-08-19T18:25:15.553Z, &quot;financial&quot;: {&quot;paymentTerms&quot;: &quot;net_30&quot;, &quot;preferredPaymentMethods&quot;: []}, &quot;fullAddress&quot;: &quot;123 Test Street, Test City, Test Country&quot;, &quot;id&quot;: &quot;68a4c18bae586e8c26b71f9e&quot;, &quot;images&quot;: [], &quot;isAvailable&quot;: false, &quot;isFeatured&quot;: false, &quot;isVerified&quot;: false, &quot;legalName&quot;: &quot;Test Provider LLC&quot;, &quot;meta&quot;: {&quot;created_at&quot;: 2025-08-19T18:25:15.553Z, &quot;isDeleted&quot;: false, &quot;updated_at&quot;: 2025-08-19T18:25:15.553Z, &quot;version&quot;: 2}, &quot;name&quot;: &quot;Test Provider&quot;, &quot;operatingHours&quot;: {&quot;friday&quot;: {&quot;isOpen&quot;: true}, &quot;monday&quot;: {&quot;isOpen&quot;: true}, &quot;saturday&quot;: {&quot;isOpen&quot;: true}, &quot;sunday&quot;: {&quot;isOpen&quot;: true}, &quot;thursday&quot;: {&quot;isOpen&quot;: true}, &quot;tuesday&quot;: {&quot;isOpen&quot;: true}, &quot;wednesday&quot;: {&quot;isOpen&quot;: true}}, &quot;rating&quot;: {&quot;average&quot;: 0, &quot;breakdown&quot;: {&quot;five&quot;: 0, &quot;four&quot;: 0, &quot;one&quot;: 0, &quot;three&quot;: 0, &quot;two&quot;: 0}, &quot;count&quot;: 0}, &quot;services&quot;: [], &quot;specializations&quot;: [], &quot;status&quot;: &quot;pending&quot;, &quot;type&quot;: &quot;hotel&quot;, &quot;updatedAt&quot;: 2025-08-19T18:25:15.553Z}, {&quot;__v&quot;: 0, &quot;_id&quot;: &quot;68a4c18bc785ae7c5b741128&quot;, &quot;address&quot;: {&quot;city&quot;: &quot;City B&quot;, &quot;country&quot;: &quot;Country B&quot;, &quot;street&quot;: &quot;456 Hotel Ave&quot;}, &quot;averageRatingFormatted&quot;: &quot;0.0&quot;, &quot;capacity&quot;: {&quot;currentBookings&quot;: 0}, &quot;category&quot;: &quot;standard&quot;, &quot;certifications&quot;: [], &quot;contact&quot;: {&quot;primaryContact&quot;: {&quot;email&quot;: &quot;jane@hotelb.com&quot;, &quot;name&quot;: &quot;Jane Doe&quot;, &quot;phone&quot;: &quot;+1234567891&quot;}}, &quot;contract&quot;: {&quot;autoRenew&quot;: false, &quot;isActive&quot;: true}, &quot;createdAt&quot;: 2025-08-19T18:25:15.554Z, &quot;financial&quot;: {&quot;paymentTerms&quot;: &quot;net_30&quot;, &quot;preferredPaymentMethods&quot;: []}, &quot;fullAddress&quot;: &quot;456 Hotel Ave, City B, Country B&quot;, &quot;id&quot;: &quot;68a4c18bc785ae7c5b741128&quot;, &quot;images&quot;: [], &quot;isAvailable&quot;: true, &quot;isFeatured&quot;: false, &quot;isVerified&quot;: false, &quot;legalName&quot;: &quot;Hotel B LLC&quot;, &quot;meta&quot;: {&quot;created_at&quot;: 2025-08-19T18:25:15.553Z, &quot;isDeleted&quot;: false, &quot;updated_at&quot;: 2025-08-19T18:25:15.554Z, &quot;version&quot;: 2}, &quot;name&quot;: &quot;Hotel B&quot;, &quot;operatingHours&quot;: {&quot;friday&quot;: {&quot;isOpen&quot;: true}, &quot;monday&quot;: {&quot;isOpen&quot;: true}, &quot;saturday&quot;: {&quot;isOpen&quot;: true}, &quot;sunday&quot;: {&quot;isOpen&quot;: true}, &quot;thursday&quot;: {&quot;isOpen&quot;: true}, &quot;tuesday&quot;: {&quot;isOpen&quot;: true}, &quot;wednesday&quot;: {&quot;isOpen&quot;: true}}, &quot;rating&quot;: {&quot;average&quot;: 0, &quot;breakdown&quot;: {&quot;five&quot;: 0, &quot;four&quot;: 0, &quot;one&quot;: 0, &quot;three&quot;: 0, &quot;two&quot;: 0}, &quot;count&quot;: 0}, &quot;services&quot;: [], &quot;specializations&quot;: [], &quot;status&quot;: &quot;active&quot;, &quot;type&quot;: &quot;hotel&quot;, &quot;updatedAt&quot;: 2025-08-19T18:25:15.554Z}, {&quot;__v&quot;: 0, &quot;_id&quot;: &quot;68a4c18bc785ae7c5b741129&quot;, &quot;address&quot;: {&quot;city&quot;: &quot;City C&quot;, &quot;country&quot;: &quot;Country C&quot;, &quot;street&quot;: &quot;789 Transport Rd&quot;}, &quot;averageRatingFormatted&quot;: &quot;0.0&quot;, &quot;capacity&quot;: {&quot;currentBookings&quot;: 0}, &quot;category&quot;: &quot;standard&quot;, &quot;certifications&quot;: [], &quot;contact&quot;: {&quot;primaryContact&quot;: {&quot;email&quot;: &quot;bob@transport.com&quot;, &quot;name&quot;: &quot;Bob Smith&quot;, &quot;phone&quot;: &quot;+1234567892&quot;}}, &quot;contract&quot;: {&quot;autoRenew&quot;: false, &quot;isActive&quot;: true}, &quot;createdAt&quot;: 2025-08-19T18:25:15.554Z, &quot;financial&quot;: {&quot;paymentTerms&quot;: &quot;net_30&quot;, &quot;preferredPaymentMethods&quot;: []}, &quot;fullAddress&quot;: &quot;789 Transport Rd, City C, Country C&quot;, &quot;id&quot;: &quot;68a4c18bc785ae7c5b741129&quot;, &quot;images&quot;: [], &quot;isAvailable&quot;: true, &quot;isFeatured&quot;: false, &quot;isVerified&quot;: true, &quot;legalName&quot;: &quot;Transport Co LLC&quot;, &quot;meta&quot;: {&quot;created_at&quot;: 2025-08-19T18:25:15.553Z, &quot;isDeleted&quot;: false, &quot;updated_at&quot;: 2025-08-19T18:25:15.554Z, &quot;version&quot;: 2}, &quot;name&quot;: &quot;Transport Co&quot;, &quot;operatingHours&quot;: {&quot;friday&quot;: {&quot;isOpen&quot;: true}, &quot;monday&quot;: {&quot;isOpen&quot;: true}, &quot;saturday&quot;: {&quot;isOpen&quot;: true}, &quot;sunday&quot;: {&quot;isOpen&quot;: true}, &quot;thursday&quot;: {&quot;isOpen&quot;: true}, &quot;tuesday&quot;: {&quot;isOpen&quot;: true}, &quot;wednesday&quot;: {&quot;isOpen&quot;: true}}, &quot;rating&quot;: {&quot;average&quot;: 0, &quot;breakdown&quot;: {&quot;five&quot;: 0, &quot;four&quot;: 0, &quot;one&quot;: 0, &quot;three&quot;: 0, &quot;two&quot;: 0}, &quot;count&quot;: 0}, &quot;services&quot;: [], &quot;specializations&quot;: [], &quot;status&quot;: &quot;active&quot;, &quot;type&quot;: &quot;transport&quot;, &quot;updatedAt&quot;: 2025-08-19T18:25:15.554Z}, {&quot;__v&quot;: 0, &quot;_id&quot;: &quot;68a4c18bc785ae7c5b741127&quot;, &quot;address&quot;: {&quot;city&quot;: &quot;City A&quot;, &quot;country&quot;: &quot;Country A&quot;, &quot;street&quot;: &quot;123 Hotel St&quot;}, &quot;averageRatingFormatted&quot;: &quot;0.0&quot;, &quot;capacity&quot;: {&quot;currentBookings&quot;: 0}, &quot;category&quot;: &quot;standard&quot;, &quot;certifications&quot;: [], &quot;contact&quot;: {&quot;primaryContact&quot;: {&quot;email&quot;: &quot;john@hotela.com&quot;, &quot;name&quot;: &quot;John Doe&quot;, &quot;phone&quot;: &quot;+1234567890&quot;}}, &quot;contract&quot;: {&quot;autoRenew&quot;: false, &quot;isActive&quot;: true}, &quot;createdAt&quot;: 2025-08-19T18:25:15.554Z, &quot;financial&quot;: {&quot;paymentTerms&quot;: &quot;net_30&quot;, &quot;preferredPaymentMethods&quot;: []}, &quot;fullAddress&quot;: &quot;123 Hotel St, City A, Country A&quot;, &quot;id&quot;: &quot;68a4c18bc785ae7c5b741127&quot;, &quot;images&quot;: [], &quot;isAvailable&quot;: true, &quot;isFeatured&quot;: false, &quot;isVerified&quot;: true, &quot;legalName&quot;: &quot;Hotel A LLC&quot;, &quot;meta&quot;: {&quot;created_at&quot;: 2025-08-19T18:25:15.553Z, &quot;isDeleted&quot;: false, &quot;updated_at&quot;: 2025-08-19T18:25:15.554Z, &quot;version&quot;: 2}, &quot;name&quot;: &quot;Hotel A&quot;, &quot;operatingHours&quot;: {&quot;friday&quot;: {&quot;isOpen&quot;: true}, &quot;monday&quot;: {&quot;isOpen&quot;: true}, &quot;saturday&quot;: {&quot;isOpen&quot;: true}, &quot;sunday&quot;: {&quot;isOpen&quot;: true}, &quot;thursday&quot;: {&quot;isOpen&quot;: true}, &quot;tuesday&quot;: {&quot;isOpen&quot;: true}, &quot;wednesday&quot;: {&quot;isOpen&quot;: true}}, &quot;rating&quot;: {&quot;average&quot;: 0, &quot;breakdown&quot;: {&quot;five&quot;: 0, &quot;four&quot;: 0, &quot;one&quot;: 0, &quot;three&quot;: 0, &quot;two&quot;: 0}, &quot;count&quot;: 0}, &quot;services&quot;: [], &quot;specializations&quot;: [], &quot;status&quot;: &quot;active&quot;, &quot;type&quot;: &quot;hotel&quot;, &quot;updatedAt&quot;: 2025-08-19T18:25:15.554Z}]
    at Object.toHaveLength (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/models/__test__/provider.model.test.js:600:25)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Provider Model Static Methods should include deleted records when explicitly requested" name="Provider Model Static Methods should include deleted records when explicitly requested" time="0.01">
      <failure>Error: expect(received).toHaveLength(expected)

Expected length: 3
Received length: 4
Received array:  [{&quot;__v&quot;: 0, &quot;_id&quot;: &quot;68a4c18bae586e8c26b71fa8&quot;, &quot;address&quot;: {&quot;city&quot;: &quot;Test City&quot;, &quot;country&quot;: &quot;Test Country&quot;, &quot;street&quot;: &quot;123 Test Street&quot;}, &quot;averageRatingFormatted&quot;: &quot;0.0&quot;, &quot;capacity&quot;: {&quot;currentBookings&quot;: 0}, &quot;category&quot;: &quot;standard&quot;, &quot;certifications&quot;: [], &quot;contact&quot;: {&quot;primaryContact&quot;: {&quot;email&quot;: &quot;john@testprovider.com&quot;, &quot;name&quot;: &quot;John Doe&quot;, &quot;phone&quot;: &quot;+1234567890&quot;}}, &quot;contract&quot;: {&quot;autoRenew&quot;: false, &quot;isActive&quot;: true}, &quot;createdAt&quot;: 2025-08-19T18:25:15.561Z, &quot;financial&quot;: {&quot;paymentTerms&quot;: &quot;net_30&quot;, &quot;preferredPaymentMethods&quot;: []}, &quot;fullAddress&quot;: &quot;123 Test Street, Test City, Test Country&quot;, &quot;id&quot;: &quot;68a4c18bae586e8c26b71fa8&quot;, &quot;images&quot;: [], &quot;isAvailable&quot;: false, &quot;isFeatured&quot;: false, &quot;isVerified&quot;: false, &quot;legalName&quot;: &quot;Test Provider LLC&quot;, &quot;meta&quot;: {&quot;created_at&quot;: 2025-08-19T18:25:15.561Z, &quot;isDeleted&quot;: false, &quot;updated_at&quot;: 2025-08-19T18:25:15.561Z, &quot;version&quot;: 2}, &quot;name&quot;: &quot;Test Provider&quot;, &quot;operatingHours&quot;: {&quot;friday&quot;: {&quot;isOpen&quot;: true}, &quot;monday&quot;: {&quot;isOpen&quot;: true}, &quot;saturday&quot;: {&quot;isOpen&quot;: true}, &quot;sunday&quot;: {&quot;isOpen&quot;: true}, &quot;thursday&quot;: {&quot;isOpen&quot;: true}, &quot;tuesday&quot;: {&quot;isOpen&quot;: true}, &quot;wednesday&quot;: {&quot;isOpen&quot;: true}}, &quot;rating&quot;: {&quot;average&quot;: 0, &quot;breakdown&quot;: {&quot;five&quot;: 0, &quot;four&quot;: 0, &quot;one&quot;: 0, &quot;three&quot;: 0, &quot;two&quot;: 0}, &quot;count&quot;: 0}, &quot;services&quot;: [], &quot;specializations&quot;: [], &quot;status&quot;: &quot;pending&quot;, &quot;type&quot;: &quot;hotel&quot;, &quot;updatedAt&quot;: 2025-08-19T18:25:15.561Z}, {&quot;__v&quot;: 0, &quot;_id&quot;: &quot;68a4c18bc785ae7c5b74112f&quot;, &quot;address&quot;: {&quot;city&quot;: &quot;City B&quot;, &quot;country&quot;: &quot;Country B&quot;, &quot;street&quot;: &quot;456 Hotel Ave&quot;}, &quot;averageRatingFormatted&quot;: &quot;0.0&quot;, &quot;capacity&quot;: {&quot;currentBookings&quot;: 0}, &quot;category&quot;: &quot;standard&quot;, &quot;certifications&quot;: [], &quot;contact&quot;: {&quot;primaryContact&quot;: {&quot;email&quot;: &quot;jane@hotelb.com&quot;, &quot;name&quot;: &quot;Jane Doe&quot;, &quot;phone&quot;: &quot;+1234567891&quot;}}, &quot;contract&quot;: {&quot;autoRenew&quot;: false, &quot;isActive&quot;: true}, &quot;createdAt&quot;: 2025-08-19T18:25:15.563Z, &quot;financial&quot;: {&quot;paymentTerms&quot;: &quot;net_30&quot;, &quot;preferredPaymentMethods&quot;: []}, &quot;fullAddress&quot;: &quot;456 Hotel Ave, City B, Country B&quot;, &quot;id&quot;: &quot;68a4c18bc785ae7c5b74112f&quot;, &quot;images&quot;: [], &quot;isAvailable&quot;: true, &quot;isFeatured&quot;: false, &quot;isVerified&quot;: false, &quot;legalName&quot;: &quot;Hotel B LLC&quot;, &quot;meta&quot;: {&quot;created_at&quot;: 2025-08-19T18:25:15.562Z, &quot;isDeleted&quot;: false, &quot;updated_at&quot;: 2025-08-19T18:25:15.563Z, &quot;version&quot;: 2}, &quot;name&quot;: &quot;Hotel B&quot;, &quot;operatingHours&quot;: {&quot;friday&quot;: {&quot;isOpen&quot;: true}, &quot;monday&quot;: {&quot;isOpen&quot;: true}, &quot;saturday&quot;: {&quot;isOpen&quot;: true}, &quot;sunday&quot;: {&quot;isOpen&quot;: true}, &quot;thursday&quot;: {&quot;isOpen&quot;: true}, &quot;tuesday&quot;: {&quot;isOpen&quot;: true}, &quot;wednesday&quot;: {&quot;isOpen&quot;: true}}, &quot;rating&quot;: {&quot;average&quot;: 0, &quot;breakdown&quot;: {&quot;five&quot;: 0, &quot;four&quot;: 0, &quot;one&quot;: 0, &quot;three&quot;: 0, &quot;two&quot;: 0}, &quot;count&quot;: 0}, &quot;services&quot;: [], &quot;specializations&quot;: [], &quot;status&quot;: &quot;active&quot;, &quot;type&quot;: &quot;hotel&quot;, &quot;updatedAt&quot;: 2025-08-19T18:25:15.563Z}, {&quot;__v&quot;: 0, &quot;_id&quot;: &quot;68a4c18bc785ae7c5b741130&quot;, &quot;address&quot;: {&quot;city&quot;: &quot;City C&quot;, &quot;country&quot;: &quot;Country C&quot;, &quot;street&quot;: &quot;789 Transport Rd&quot;}, &quot;averageRatingFormatted&quot;: &quot;0.0&quot;, &quot;capacity&quot;: {&quot;currentBookings&quot;: 0}, &quot;category&quot;: &quot;standard&quot;, &quot;certifications&quot;: [], &quot;contact&quot;: {&quot;primaryContact&quot;: {&quot;email&quot;: &quot;bob@transport.com&quot;, &quot;name&quot;: &quot;Bob Smith&quot;, &quot;phone&quot;: &quot;+1234567892&quot;}}, &quot;contract&quot;: {&quot;autoRenew&quot;: false, &quot;isActive&quot;: true}, &quot;createdAt&quot;: 2025-08-19T18:25:15.563Z, &quot;financial&quot;: {&quot;paymentTerms&quot;: &quot;net_30&quot;, &quot;preferredPaymentMethods&quot;: []}, &quot;fullAddress&quot;: &quot;789 Transport Rd, City C, Country C&quot;, &quot;id&quot;: &quot;68a4c18bc785ae7c5b741130&quot;, &quot;images&quot;: [], &quot;isAvailable&quot;: true, &quot;isFeatured&quot;: false, &quot;isVerified&quot;: true, &quot;legalName&quot;: &quot;Transport Co LLC&quot;, &quot;meta&quot;: {&quot;created_at&quot;: 2025-08-19T18:25:15.563Z, &quot;isDeleted&quot;: false, &quot;updated_at&quot;: 2025-08-19T18:25:15.563Z, &quot;version&quot;: 2}, &quot;name&quot;: &quot;Transport Co&quot;, &quot;operatingHours&quot;: {&quot;friday&quot;: {&quot;isOpen&quot;: true}, &quot;monday&quot;: {&quot;isOpen&quot;: true}, &quot;saturday&quot;: {&quot;isOpen&quot;: true}, &quot;sunday&quot;: {&quot;isOpen&quot;: true}, &quot;thursday&quot;: {&quot;isOpen&quot;: true}, &quot;tuesday&quot;: {&quot;isOpen&quot;: true}, &quot;wednesday&quot;: {&quot;isOpen&quot;: true}}, &quot;rating&quot;: {&quot;average&quot;: 0, &quot;breakdown&quot;: {&quot;five&quot;: 0, &quot;four&quot;: 0, &quot;one&quot;: 0, &quot;three&quot;: 0, &quot;two&quot;: 0}, &quot;count&quot;: 0}, &quot;services&quot;: [], &quot;specializations&quot;: [], &quot;status&quot;: &quot;active&quot;, &quot;type&quot;: &quot;transport&quot;, &quot;updatedAt&quot;: 2025-08-19T18:25:15.563Z}, {&quot;__v&quot;: 0, &quot;_id&quot;: &quot;68a4c18bc785ae7c5b74112e&quot;, &quot;address&quot;: {&quot;city&quot;: &quot;City A&quot;, &quot;country&quot;: &quot;Country A&quot;, &quot;street&quot;: &quot;123 Hotel St&quot;}, &quot;averageRatingFormatted&quot;: &quot;0.0&quot;, &quot;capacity&quot;: {&quot;currentBookings&quot;: 0}, &quot;category&quot;: &quot;standard&quot;, &quot;certifications&quot;: [], &quot;contact&quot;: {&quot;primaryContact&quot;: {&quot;email&quot;: &quot;john@hotela.com&quot;, &quot;name&quot;: &quot;John Doe&quot;, &quot;phone&quot;: &quot;+1234567890&quot;}}, &quot;contract&quot;: {&quot;autoRenew&quot;: false, &quot;isActive&quot;: true}, &quot;createdAt&quot;: 2025-08-19T18:25:15.563Z, &quot;financial&quot;: {&quot;paymentTerms&quot;: &quot;net_30&quot;, &quot;preferredPaymentMethods&quot;: []}, &quot;fullAddress&quot;: &quot;123 Hotel St, City A, Country A&quot;, &quot;id&quot;: &quot;68a4c18bc785ae7c5b74112e&quot;, &quot;images&quot;: [], &quot;isAvailable&quot;: true, &quot;isFeatured&quot;: false, &quot;isVerified&quot;: true, &quot;legalName&quot;: &quot;Hotel A LLC&quot;, &quot;meta&quot;: {&quot;created_at&quot;: 2025-08-19T18:25:15.562Z, &quot;isDeleted&quot;: false, &quot;updated_at&quot;: 2025-08-19T18:25:15.563Z, &quot;version&quot;: 2}, &quot;name&quot;: &quot;Hotel A&quot;, &quot;operatingHours&quot;: {&quot;friday&quot;: {&quot;isOpen&quot;: true}, &quot;monday&quot;: {&quot;isOpen&quot;: true}, &quot;saturday&quot;: {&quot;isOpen&quot;: true}, &quot;sunday&quot;: {&quot;isOpen&quot;: true}, &quot;thursday&quot;: {&quot;isOpen&quot;: true}, &quot;tuesday&quot;: {&quot;isOpen&quot;: true}, &quot;wednesday&quot;: {&quot;isOpen&quot;: true}}, &quot;rating&quot;: {&quot;average&quot;: 0, &quot;breakdown&quot;: {&quot;five&quot;: 0, &quot;four&quot;: 0, &quot;one&quot;: 0, &quot;three&quot;: 0, &quot;two&quot;: 0}, &quot;count&quot;: 0}, &quot;services&quot;: [], &quot;specializations&quot;: [], &quot;status&quot;: &quot;active&quot;, &quot;type&quot;: &quot;hotel&quot;, &quot;updatedAt&quot;: 2025-08-19T18:25:15.563Z}]
    at Object.toHaveLength (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/models/__test__/provider.model.test.js:605:25)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Provider Model Static Methods should handle missing optional fields gracefully" name="Provider Model Static Methods should handle missing optional fields gracefully" time="0.009">
    </testcase>
    <testcase classname="Provider Model Pre-save Middleware should update meta timestamps and version" name="Provider Model Pre-save Middleware should update meta timestamps and version" time="0.003">
    </testcase>
    <testcase classname="Provider Model Pre-save Middleware should calculate average rating correctly" name="Provider Model Pre-save Middleware should calculate average rating correctly" time="0.004">
    </testcase>
    <testcase classname="Provider Model Pre-find Middleware should exclude deleted records by default" name="Provider Model Pre-find Middleware should exclude deleted records by default" time="0.007">
    </testcase>
    <testcase classname="Provider Model Pre-find Middleware should include deleted records when explicitly requested" name="Provider Model Pre-find Middleware should include deleted records when explicitly requested" time="0.006">
    </testcase>
    <testcase classname="Provider Model Edge Cases should handle missing optional fields gracefully" name="Provider Model Edge Cases should handle missing optional fields gracefully" time="0.003">
    </testcase>
    <testcase classname="Provider Model Edge Cases should handle complex nested objects" name="Provider Model Edge Cases should handle complex nested objects" time="0.006">
    </testcase>
  </testsuite>
  <testsuite name="Anon routes" errors="0" failures="1" skipped="0" timestamp="2025-08-19T18:25:15" time="0.186" tests="15">
    <testcase classname="Anon routes API Root GET / -&gt; 200" name="Anon routes API Root GET / -&gt; 200" time="0.004">
    </testcase>
    <testcase classname="Anon routes Auth POST /auth/register -&gt; 201" name="Anon routes Auth POST /auth/register -&gt; 201" time="0.004">
    </testcase>
    <testcase classname="Anon routes Auth POST /auth/login empty body -&gt; 400" name="Anon routes Auth POST /auth/login empty body -&gt; 400" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 400
Received: 200
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/anon.route.test.js:88:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Anon routes Auth POST /auth/login valid -&gt; 200" name="Anon routes Auth POST /auth/login valid -&gt; 200" time="0.002">
    </testcase>
    <testcase classname="Anon routes Auth POST /auth/forgot-password -&gt; 200" name="Anon routes Auth POST /auth/forgot-password -&gt; 200" time="0.006">
    </testcase>
    <testcase classname="Anon routes Auth POST /auth/reset-password -&gt; 200" name="Anon routes Auth POST /auth/reset-password -&gt; 200" time="0.001">
    </testcase>
    <testcase classname="Anon routes Auth POST /auth/verify-email -&gt; 200" name="Anon routes Auth POST /auth/verify-email -&gt; 200" time="0.002">
    </testcase>
    <testcase classname="Anon routes Auth POST /auth/resend-verification -&gt; 200" name="Anon routes Auth POST /auth/resend-verification -&gt; 200" time="0.001">
    </testcase>
    <testcase classname="Anon routes Journeys GET /journeys -&gt; 200" name="Anon routes Journeys GET /journeys -&gt; 200" time="0.001">
    </testcase>
    <testcase classname="Anon routes Journeys GET /journeys/search -&gt; 200" name="Anon routes Journeys GET /journeys/search -&gt; 200" time="0.002">
    </testcase>
    <testcase classname="Anon routes Journeys GET /journeys/:id -&gt; 200" name="Anon routes Journeys GET /journeys/:id -&gt; 200" time="0.001">
    </testcase>
    <testcase classname="Anon routes Journeys GET /journeys/:invalidId -&gt; 400" name="Anon routes Journeys GET /journeys/:invalidId -&gt; 400" time="0.001">
    </testcase>
    <testcase classname="Anon routes Providers GET /providers -&gt; 200" name="Anon routes Providers GET /providers -&gt; 200" time="0">
    </testcase>
    <testcase classname="Anon routes Providers GET /providers/:id -&gt; 200" name="Anon routes Providers GET /providers/:id -&gt; 200" time="0.001">
    </testcase>
    <testcase classname="Anon routes Providers GET /providers/:invalidId -&gt; 400" name="Anon routes Providers GET /providers/:invalidId -&gt; 400" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Profile Controller" errors="0" failures="13" skipped="0" timestamp="2025-08-19T18:25:13" time="2.294" tests="15">
    <testcase classname="Profile Controller GET /me should return current user profile" name="Profile Controller GET /me should return current user profile" time="0.016">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Profile Controller GET /me should return 404 if user not found" name="Profile Controller GET /me should return 404 if user not found" time="0.065">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: 404
Received: 500

Number of calls: 1
    at Object.toHaveBeenCalledWith (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/profile.test.js:119:30)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Profile Controller GET /me should return 404 if profile not found" name="Profile Controller GET /me should return 404 if profile not found" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Profile Controller PUT /me should update current user profile" name="Profile Controller PUT /me should update current user profile" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Profile Controller PUT /me should handle partial updates" name="Profile Controller PUT /me should handle partial updates" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Profile Controller GET /:id should return profile by ID with user info" name="Profile Controller GET /:id should return profile by ID with user info" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Profile Controller GET /:id should return 404 for non-existent profile" name="Profile Controller GET /:id should return 404 for non-existent profile" time="0.004">
    </testcase>
    <testcase classname="Profile Controller GET /:id should return 404 for deleted profile" name="Profile Controller GET /:id should return 404 for deleted profile" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Profile Controller PUT /:id should update profile by ID" name="Profile Controller PUT /:id should update profile by ID" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Profile Controller GET / should return all profiles with pagination" name="Profile Controller GET / should return all profiles with pagination" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Profile Controller GET / should filter profiles by search term" name="Profile Controller GET / should filter profiles by search term" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Profile Controller POST /:id/restore should restore deleted profile" name="Profile Controller POST /:id/restore should restore deleted profile" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Profile Controller POST /:id/restore should return 400 if profile is not deleted" name="Profile Controller POST /:id/restore should return 400 if profile is not deleted" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Profile Controller GET /stats should return profile statistics" name="Profile Controller GET /stats should return profile statistics" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Profile Controller Error Handling should handle database errors gracefully" name="Profile Controller Error Handling should handle database errors gracefully" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="Journey Controller" errors="0" failures="40" skipped="0" timestamp="2025-08-19T18:25:13" time="2.36" tests="40">
    <testcase classname="Journey Controller getAllJourneys should get all journeys for agents/managers" name="Journey Controller getAllJourneys should get all journeys for agents/managers" time="0.02">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller getAllJourneys should filter journeys by status" name="Journey Controller getAllJourneys should filter journeys by status" time="0.004">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller getAllJourneys should filter journeys by price range" name="Journey Controller getAllJourneys should filter journeys by price range" time="0.005">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller getAllJourneys should paginate results" name="Journey Controller getAllJourneys should paginate results" time="0.006">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller getJourneyById should get journey by ID" name="Journey Controller getJourneyById should get journey by ID" time="0.005">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller getJourneyById should return 404 for non-existent journey" name="Journey Controller getJourneyById should return 404 for non-existent journey" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller getAvailableJourneys should get available journeys for customers" name="Journey Controller getAvailableJourneys should get available journeys for customers" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller getAvailableJourneys should filter by category" name="Journey Controller getAvailableJourneys should filter by category" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller getAvailableJourneys should filter by price range" name="Journey Controller getAvailableJourneys should filter by price range" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller getJourneyDetails should get journey details for customers" name="Journey Controller getJourneyDetails should get journey details for customers" time="0.007">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller getJourneyDetails should return 404 for inactive journey" name="Journey Controller getJourneyDetails should return 404 for inactive journey" time="0.004">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller getMyAssignedJourneys should get journeys assigned to current guide" name="Journey Controller getMyAssignedJourneys should get journeys assigned to current guide" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller getMyAssignedJourneys should filter by status" name="Journey Controller getMyAssignedJourneys should filter by status" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller getMySchedule should get guide schedule with bookings" name="Journey Controller getMySchedule should get guide schedule with bookings" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller searchPublicJourneys should search public journeys" name="Journey Controller searchPublicJourneys should search public journeys" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller searchPublicJourneys should filter by category and price" name="Journey Controller searchPublicJourneys should filter by category and price" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller getPublicJourneyDetails should get public journey details" name="Journey Controller getPublicJourneyDetails should get public journey details" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller getPublicJourneyDetails should return 404 for inactive journey" name="Journey Controller getPublicJourneyDetails should return 404 for inactive journey" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller createJourney should create new journey (manager only)" name="Journey Controller createJourney should create new journey (manager only)" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller createJourney should validate required fields" name="Journey Controller createJourney should validate required fields" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller createJourney should validate price is positive" name="Journey Controller createJourney should validate price is positive" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller createJourney should validate guide exists" name="Journey Controller createJourney should validate guide exists" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller updateJourney should update journey (manager only)" name="Journey Controller updateJourney should update journey (manager only)" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller updateJourney should validate price is positive" name="Journey Controller updateJourney should validate price is positive" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller deleteJourney should delete journey (manager only)" name="Journey Controller deleteJourney should delete journey (manager only)" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller deleteJourney should not delete journey with active bookings" name="Journey Controller deleteJourney should not delete journey with active bookings" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller assignGuide should assign guide to journey" name="Journey Controller assignGuide should assign guide to journey" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller assignGuide should validate guide exists" name="Journey Controller assignGuide should validate guide exists" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller assignGuide should check guide availability" name="Journey Controller assignGuide should check guide availability" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller updateJourneyStatus should update journey status (guide only)" name="Journey Controller updateJourneyStatus should update journey status (guide only)" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller updateJourneyStatus should validate status" name="Journey Controller updateJourneyStatus should validate status" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller addJourneyNotes should add notes to journey (guide only)" name="Journey Controller addJourneyNotes should add notes to journey (guide only)" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller addJourneyNotes should validate notes are provided" name="Journey Controller addJourneyNotes should validate notes are provided" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller getJourneyStats should get journey statistics (manager only)" name="Journey Controller getJourneyStats should get journey statistics (manager only)" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller Error Handling should handle database errors gracefully" name="Journey Controller Error Handling should handle database errors gracefully" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller Error Handling should validate ObjectId format" name="Journey Controller Error Handling should validate ObjectId format" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller Data Validation should validate price is numeric" name="Journey Controller Data Validation should validate price is numeric" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller Data Validation should validate maxParticipants is positive" name="Journey Controller Data Validation should validate maxParticipants is positive" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller Business Logic should prevent assigning inactive guide" name="Journey Controller Business Logic should prevent assigning inactive guide" time="0.004">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Journey Controller Business Logic should calculate journey capacity correctly" name="Journey Controller Business Logic should calculate journey capacity correctly" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Booking Controller" errors="0" failures="29" skipped="0" timestamp="2025-08-19T18:25:13" time="2.384" tests="29">
    <testcase classname="Booking Controller getAllBookings should get all bookings for agents/managers" name="Booking Controller getAllBookings should get all bookings for agents/managers" time="0.019">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller getAllBookings should filter bookings by status" name="Booking Controller getAllBookings should filter bookings by status" time="0.004">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller getAllBookings should paginate results" name="Booking Controller getAllBookings should paginate results" time="0.004">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller getBookingById should get booking by ID" name="Booking Controller getBookingById should get booking by ID" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller getBookingById should return 404 for non-existent booking" name="Booking Controller getBookingById should return 404 for non-existent booking" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller getMyBookings should get current user bookings" name="Booking Controller getMyBookings should get current user bookings" time="0.004">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller createBooking should create new booking for customer" name="Booking Controller createBooking should create new booking for customer" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller createBooking should validate required fields" name="Booking Controller createBooking should validate required fields" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller createBooking should validate future date" name="Booking Controller createBooking should validate future date" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller createBookingForCustomer should create booking for customer (agent)" name="Booking Controller createBookingForCustomer should create booking for customer (agent)" time="0.004">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller createBookingForCustomer should validate customer exists" name="Booking Controller createBookingForCustomer should validate customer exists" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller updateMyBooking should update customer own booking" name="Booking Controller updateMyBooking should update customer own booking" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller updateMyBooking should not allow updating confirmed bookings" name="Booking Controller updateMyBooking should not allow updating confirmed bookings" time="0.005">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller updateBooking should update booking (agent/manager)" name="Booking Controller updateBooking should update booking (agent/manager)" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller updateBookingStatus should update booking status" name="Booking Controller updateBookingStatus should update booking status" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller updateBookingStatus should validate status" name="Booking Controller updateBookingStatus should validate status" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller cancelMyBooking should cancel customer own booking" name="Booking Controller cancelMyBooking should cancel customer own booking" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller cancelMyBooking should not allow cancelling completed bookings" name="Booking Controller cancelMyBooking should not allow cancelling completed bookings" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller deleteBooking should delete booking (manager only)" name="Booking Controller deleteBooking should delete booking (manager only)" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller getMyAssignedBookings should get guide assigned bookings" name="Booking Controller getMyAssignedBookings should get guide assigned bookings" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller getMyAssignedBooking should get specific guide assigned booking" name="Booking Controller getMyAssignedBooking should get specific guide assigned booking" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller getMyAssignedBooking should not allow access to unassigned journey" name="Booking Controller getMyAssignedBooking should not allow access to unassigned journey" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller getBookingStats should get booking statistics" name="Booking Controller getBookingStats should get booking statistics" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller Error Handling should handle database errors gracefully" name="Booking Controller Error Handling should handle database errors gracefully" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller Error Handling should validate ObjectId format" name="Booking Controller Error Handling should validate ObjectId format" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller Data Validation should validate participants is positive" name="Booking Controller Data Validation should validate participants is positive" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller Data Validation should validate special requests length" name="Booking Controller Data Validation should validate special requests length" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller Business Logic should calculate total price correctly" name="Booking Controller Business Logic should calculate total price correctly" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Booking Controller Business Logic should prevent double booking on same date" name="Booking Controller Business Logic should prevent double booking on same date" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
  </testsuite>
  <testsuite name="User Controller" errors="0" failures="20" skipped="0" timestamp="2025-08-19T18:25:13" time="2.455" tests="26">
    <testcase classname="User Controller POST /register should register a new user successfully" name="User Controller POST /register should register a new user successfully" time="0.063">
      <failure>Error: expected 201 &quot;Created&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/user.test.js:106:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="User Controller POST /register should return 400 for missing email" name="User Controller POST /register should return 400 for missing email" time="0.004">
    </testcase>
    <testcase classname="User Controller POST /register should return 400 for weak password" name="User Controller POST /register should return 400 for weak password" time="0.003">
    </testcase>
    <testcase classname="User Controller POST /register should return 409 for existing email" name="User Controller POST /register should return 409 for existing email" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller POST /login should login successfully with valid credentials" name="User Controller POST /login should login successfully with valid credentials" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller POST /login should return 400 for missing credentials" name="User Controller POST /login should return 400 for missing credentials" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller POST /login should return 401 for invalid credentials" name="User Controller POST /login should return 401 for invalid credentials" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller POST /login should return 403 for inactive account" name="User Controller POST /login should return 403 for inactive account" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller GET /me should return current user profile" name="User Controller GET /me should return current user profile" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller PUT /me should update current user profile" name="User Controller PUT /me should update current user profile" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller POST /forgot-password should handle forgot password request" name="User Controller POST /forgot-password should handle forgot password request" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller POST /reset-password should reset password with valid token" name="User Controller POST /reset-password should reset password with valid token" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller POST /reset-password should return 400 for invalid token" name="User Controller POST /reset-password should return 400 for invalid token" time="0.006">
    </testcase>
    <testcase classname="User Controller POST /verify-email should verify email with valid token" name="User Controller POST /verify-email should verify email with valid token" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller GET /users should return all users with pagination" name="User Controller GET /users should return all users with pagination" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller GET /users should filter users by role" name="User Controller GET /users should filter users by role" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller GET /users/:id should return user by ID" name="User Controller GET /users/:id should return user by ID" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller GET /users/:id should return 404 for non-existent user" name="User Controller GET /users/:id should return 404 for non-existent user" time="0.003">
    </testcase>
    <testcase classname="User Controller PUT /users/:id should update user by ID" name="User Controller PUT /users/:id should update user by ID" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller DELETE /users/:id should soft delete user by ID" name="User Controller DELETE /users/:id should soft delete user by ID" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller POST /users/:id/activate should activate user account" name="User Controller POST /users/:id/activate should activate user account" time="0.003">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller POST /users/:id/deactivate should deactivate user account" name="User Controller POST /users/:id/deactivate should deactivate user account" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller POST /users/:id/unlock should unlock user account" name="User Controller POST /users/:id/unlock should unlock user account" time="0.001">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller POST /logout should logout user successfully" name="User Controller POST /logout should logout user successfully" time="0.002">
    </testcase>
    <testcase classname="User Controller GET /stats should return user statistics" name="User Controller GET /stats should return user statistics" time="0.002">
      <failure>ValidationError: User validation failed: profileId: Profile reference is required
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="User Controller Error Handling should handle database errors gracefully" name="User Controller Error Handling should handle database errors gracefully" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="Agent routes" errors="0" failures="0" skipped="0" timestamp="2025-08-19T18:25:15" time="0.137" tests="23">
    <testcase classname="Agent routes AuthZ 401 sans token" name="Agent routes AuthZ 401 sans token" time="0.009">
    </testcase>
    <testcase classname="Agent routes AuthZ 403 rôle invalide" name="Agent routes AuthZ 403 rôle invalide" time="0.002">
    </testcase>
    <testcase classname="Agent routes AuthZ 200 rôle agent" name="Agent routes AuthZ 200 rôle agent" time="0.002">
    </testcase>
    <testcase classname="Agent routes Customers GET /customers -&gt; 200" name="Agent routes Customers GET /customers -&gt; 200" time="0.002">
    </testcase>
    <testcase classname="Agent routes Customers GET /customers/:id invalide -&gt; 400" name="Agent routes Customers GET /customers/:id invalide -&gt; 400" time="0.001">
    </testcase>
    <testcase classname="Agent routes Customers GET /customers/:id -&gt; 200" name="Agent routes Customers GET /customers/:id -&gt; 200" time="0.002">
    </testcase>
    <testcase classname="Agent routes Customers PUT /customers/:id -&gt; 200" name="Agent routes Customers PUT /customers/:id -&gt; 200" time="0.006">
    </testcase>
    <testcase classname="Agent routes Customers POST /customers/:id/status -&gt; 200" name="Agent routes Customers POST /customers/:id/status -&gt; 200" time="0.001">
    </testcase>
    <testcase classname="Agent routes Bookings GET /bookings -&gt; 200" name="Agent routes Bookings GET /bookings -&gt; 200" time="0.002">
    </testcase>
    <testcase classname="Agent routes Bookings GET /bookings/:id invalide -&gt; 400" name="Agent routes Bookings GET /bookings/:id invalide -&gt; 400" time="0.001">
    </testcase>
    <testcase classname="Agent routes Bookings GET /bookings/:id -&gt; 200" name="Agent routes Bookings GET /bookings/:id -&gt; 200" time="0.002">
    </testcase>
    <testcase classname="Agent routes Bookings PUT /bookings/:id -&gt; 200" name="Agent routes Bookings PUT /bookings/:id -&gt; 200" time="0.002">
    </testcase>
    <testcase classname="Agent routes Bookings POST /bookings/:id/status -&gt; 200" name="Agent routes Bookings POST /bookings/:id/status -&gt; 200" time="0.002">
    </testcase>
    <testcase classname="Agent routes Bookings POST /bookings -&gt; 201" name="Agent routes Bookings POST /bookings -&gt; 201" time="0.001">
    </testcase>
    <testcase classname="Agent routes Journeys GET /journeys -&gt; 200" name="Agent routes Journeys GET /journeys -&gt; 200" time="0.002">
    </testcase>
    <testcase classname="Agent routes Journeys GET /journeys/:id invalide -&gt; 400" name="Agent routes Journeys GET /journeys/:id invalide -&gt; 400" time="0.001">
    </testcase>
    <testcase classname="Agent routes Journeys GET /journeys/:id -&gt; 200" name="Agent routes Journeys GET /journeys/:id -&gt; 200" time="0.003">
    </testcase>
    <testcase classname="Agent routes Journeys PUT /journeys/:id -&gt; 200" name="Agent routes Journeys PUT /journeys/:id -&gt; 200" time="0.001">
    </testcase>
    <testcase classname="Agent routes Journeys POST /journeys/:id/assign-guide -&gt; 200" name="Agent routes Journeys POST /journeys/:id/assign-guide -&gt; 200" time="0.001">
    </testcase>
    <testcase classname="Agent routes Providers GET /providers -&gt; 200" name="Agent routes Providers GET /providers -&gt; 200" time="0.001">
    </testcase>
    <testcase classname="Agent routes Providers GET /providers/:id invalide -&gt; 400" name="Agent routes Providers GET /providers/:id invalide -&gt; 400" time="0.001">
    </testcase>
    <testcase classname="Agent routes Providers GET /providers/:id -&gt; 200" name="Agent routes Providers GET /providers/:id -&gt; 200" time="0.001">
    </testcase>
    <testcase classname="Agent routes Providers PUT /providers/:id -&gt; 200" name="Agent routes Providers PUT /providers/:id -&gt; 200" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Profile Model" errors="0" failures="0" skipped="0" timestamp="2025-08-19T18:25:15" time="0.28" tests="14">
    <testcase classname="Profile Model Schema Definition should create and find a profile" name="Profile Model Schema Definition should create and find a profile" time="0.034">
    </testcase>
    <testcase classname="Profile Model Schema Definition should set default values" name="Profile Model Schema Definition should set default values" time="0.006">
    </testcase>
    <testcase classname="Profile Model Schema Definition should require userId and firstname" name="Profile Model Schema Definition should require userId and firstname" time="0.005">
    </testcase>
    <testcase classname="Profile Model Schema Definition should allow multiple profiles with same userId (no unique constraint)" name="Profile Model Schema Definition should allow multiple profiles with same userId (no unique constraint)" time="0.015">
    </testcase>
    <testcase classname="Profile Model Validation should validate required fields" name="Profile Model Validation should validate required fields" time="0.01">
    </testcase>
    <testcase classname="Profile Model Validation should validate role enum" name="Profile Model Validation should validate role enum" time="0.005">
    </testcase>
    <testcase classname="Profile Model Validation should validate sexe enum" name="Profile Model Validation should validate sexe enum" time="0.006">
    </testcase>
    <testcase classname="Profile Model Virtuals should generate full name" name="Profile Model Virtuals should generate full name" time="0.005">
    </testcase>
    <testcase classname="Profile Model Virtuals should handle missing lastname" name="Profile Model Virtuals should handle missing lastname" time="0.007">
    </testcase>
    <testcase classname="Profile Model Pre-save Middleware should ensure meta exists" name="Profile Model Pre-save Middleware should ensure meta exists" time="0.007">
    </testcase>
    <testcase classname="Profile Model Edge Cases should handle missing optional fields" name="Profile Model Edge Cases should handle missing optional fields" time="0.007">
    </testcase>
    <testcase classname="Profile Model Edge Cases should handle complex address information" name="Profile Model Edge Cases should handle complex address information" time="0.007">
    </testcase>
    <testcase classname="Profile Model Edge Cases should handle availability settings" name="Profile Model Edge Cases should handle availability settings" time="0.006">
    </testcase>
    <testcase classname="Profile Model Edge Cases should handle special characters in names" name="Profile Model Edge Cases should handle special characters in names" time="0.008">
    </testcase>
  </testsuite>
  <testsuite name="Meta Schema" errors="0" failures="2" skipped="0" timestamp="2025-08-19T18:25:15" time="0.313" tests="14">
    <testcase classname="Meta Schema Schema Definition should have all required meta fields" name="Meta Schema Schema Definition should have all required meta fields" time="0.041">
    </testcase>
    <testcase classname="Meta Schema Schema Definition should set default values correctly" name="Meta Schema Schema Definition should set default values correctly" time="0.013">
    </testcase>
    <testcase classname="Meta Schema Timestamps should set created_at on new document" name="Meta Schema Timestamps should set created_at on new document" time="0.013">
    </testcase>
    <testcase classname="Meta Schema Timestamps should update updated_at on save" name="Meta Schema Timestamps should update updated_at on save" time="0.021">
      <failure>DocumentNotFoundError: No document found for query &quot;{ _id: new ObjectId(&apos;68a4c18c9cdb6c0dad965d86&apos;) }&quot; on model &quot;TestModel&quot;
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/model.js:545:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/model.js:450:9
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Meta Schema Soft Delete Methods should soft delete correctly" name="Meta Schema Soft Delete Methods should soft delete correctly" time="0.02">
    </testcase>
    <testcase classname="Meta Schema Soft Delete Methods should restore correctly" name="Meta Schema Soft Delete Methods should restore correctly" time="0.009">
    </testcase>
    <testcase classname="Meta Schema Account Lock Methods should check if account is locked" name="Meta Schema Account Lock Methods should check if account is locked" time="0.004">
    </testcase>
    <testcase classname="Meta Schema Account Lock Methods should increment login attempts correctly" name="Meta Schema Account Lock Methods should increment login attempts correctly" time="0.006">
    </testcase>
    <testcase classname="Meta Schema Account Lock Methods should lock account after 5 failed attempts" name="Meta Schema Account Lock Methods should lock account after 5 failed attempts" time="0.006">
    </testcase>
    <testcase classname="Meta Schema Account Lock Methods should reset login attempts when lock expires" name="Meta Schema Account Lock Methods should reset login attempts when lock expires" time="0.003">
    </testcase>
    <testcase classname="Meta Schema Edge Cases should handle undefined meta gracefully" name="Meta Schema Edge Cases should handle undefined meta gracefully" time="0.005">
    </testcase>
    <testcase classname="Meta Schema Edge Cases should handle null values in meta fields" name="Meta Schema Edge Cases should handle null values in meta fields" time="0.004">
    </testcase>
    <testcase classname="Meta Schema Data Persistence should persist meta data correctly" name="Meta Schema Data Persistence should persist meta data correctly" time="0.009">
      <failure>TypeError: Cannot read properties of null (reading &apos;meta&apos;)
    at Object.meta (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/models/__test__/meta.model.test.js:256:20)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Meta Schema Data Persistence should update meta fields correctly" name="Meta Schema Data Persistence should update meta fields correctly" time="0.01">
    </testcase>
  </testsuite>
  <testsuite name="Logger Middleware" errors="0" failures="0" skipped="0" timestamp="2025-08-19T18:25:15" time="0.256" tests="13">
    <testcase classname="Logger Middleware requestLogger should log request details and store start time" name="Logger Middleware requestLogger should log request details and store start time" time="0.039">
    </testcase>
    <testcase classname="Logger Middleware requestLogger should capture request headers and body" name="Logger Middleware requestLogger should capture request headers and body" time="0.001">
    </testcase>
    <testcase classname="Logger Middleware requestLogger should redact authorization header" name="Logger Middleware requestLogger should redact authorization header" time="0.001">
    </testcase>
    <testcase classname="Logger Middleware responseLogger should log response details when response finishes" name="Logger Middleware responseLogger should log response details when response finishes" time="0">
    </testcase>
    <testcase classname="Logger Middleware responseLogger should calculate and log response duration" name="Logger Middleware responseLogger should calculate and log response duration" time="0.001">
    </testcase>
    <testcase classname="Logger Middleware errorLogger should log error details" name="Logger Middleware errorLogger should log error details" time="0">
    </testcase>
    <testcase classname="Logger Middleware performanceLogger should log performance data when response finishes" name="Logger Middleware performanceLogger should log performance data when response finishes" time="0.001">
    </testcase>
    <testcase classname="Logger Middleware performanceLogger should log slow requests separately" name="Logger Middleware performanceLogger should log slow requests separately" time="0">
    </testcase>
    <testcase classname="Logger Middleware securityLogger should log security data for all requests" name="Logger Middleware securityLogger should log security data for all requests" time="0.001">
    </testcase>
    <testcase classname="Logger Middleware securityLogger should detect and log suspicious patterns" name="Logger Middleware securityLogger should detect and log suspicious patterns" time="0">
    </testcase>
    <testcase classname="Logger Middleware securityLogger should detect XSS attempts" name="Logger Middleware securityLogger should detect XSS attempts" time="0">
    </testcase>
    <testcase classname="Logger Middleware applyAllLogging should apply all logging middleware to the app" name="Logger Middleware applyAllLogging should apply all logging middleware to the app" time="0">
    </testcase>
    <testcase classname="Logger Middleware Integration should work together in a real Express app" name="Logger Middleware Integration should work together in a real Express app" time="0.117">
    </testcase>
  </testsuite>
  <testsuite name="Validation Middleware" errors="0" failures="0" skipped="0" timestamp="2025-08-19T18:25:16" time="0.107" tests="43">
    <testcase classname="Validation Middleware Validators validateType should validate string type correctly" name="Validation Middleware Validators validateType should validate string type correctly" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware Validators validateType should validate number type correctly" name="Validation Middleware Validators validateType should validate number type correctly" time="0">
    </testcase>
    <testcase classname="Validation Middleware Validators validateType should validate boolean type correctly" name="Validation Middleware Validators validateType should validate boolean type correctly" time="0">
    </testcase>
    <testcase classname="Validation Middleware Validators validateType should validate object type correctly" name="Validation Middleware Validators validateType should validate object type correctly" time="0">
    </testcase>
    <testcase classname="Validation Middleware Validators validateType should validate array type correctly" name="Validation Middleware Validators validateType should validate array type correctly" time="0">
    </testcase>
    <testcase classname="Validation Middleware Validators validatePattern should validate regex patterns correctly" name="Validation Middleware Validators validatePattern should validate regex patterns correctly" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware Validators validatePattern should validate string patterns correctly" name="Validation Middleware Validators validatePattern should validate string patterns correctly" time="0">
    </testcase>
    <testcase classname="Validation Middleware Validators validatePattern should handle invalid regex patterns gracefully" name="Validation Middleware Validators validatePattern should handle invalid regex patterns gracefully" time="0">
    </testcase>
    <testcase classname="Validation Middleware Validators validateLength should validate minimum length correctly" name="Validation Middleware Validators validateLength should validate minimum length correctly" time="0">
    </testcase>
    <testcase classname="Validation Middleware Validators validateLength should validate maximum length correctly" name="Validation Middleware Validators validateLength should validate maximum length correctly" time="0">
    </testcase>
    <testcase classname="Validation Middleware Validators validateLength should validate both min and max length correctly" name="Validation Middleware Validators validateLength should validate both min and max length correctly" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware Validators validateLength should return true for non-string values" name="Validation Middleware Validators validateLength should return true for non-string values" time="0">
    </testcase>
    <testcase classname="Validation Middleware Validators validateRange should validate minimum value correctly" name="Validation Middleware Validators validateRange should validate minimum value correctly" time="0">
    </testcase>
    <testcase classname="Validation Middleware Validators validateRange should validate maximum value correctly" name="Validation Middleware Validators validateRange should validate maximum value correctly" time="0">
    </testcase>
    <testcase classname="Validation Middleware Validators validateRange should validate both min and max values correctly" name="Validation Middleware Validators validateRange should validate both min and max values correctly" time="0">
    </testcase>
    <testcase classname="Validation Middleware Validators validateRange should return true for non-number values" name="Validation Middleware Validators validateRange should return true for non-number values" time="0.005">
    </testcase>
    <testcase classname="Validation Middleware Validators validateRequired should validate required fields correctly" name="Validation Middleware Validators validateRequired should validate required fields correctly" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware Validators validateRequired should reject undefined and null values" name="Validation Middleware Validators validateRequired should reject undefined and null values" time="0">
    </testcase>
    <testcase classname="Validation Middleware Validators validateRequired should reject empty strings" name="Validation Middleware Validators validateRequired should reject empty strings" time="0">
    </testcase>
    <testcase classname="Validation Middleware Validators validateRequired should reject empty arrays" name="Validation Middleware Validators validateRequired should reject empty arrays" time="0">
    </testcase>
    <testcase classname="Validation Middleware validateData should validate required fields" name="Validation Middleware validateData should validate required fields" time="0">
    </testcase>
    <testcase classname="Validation Middleware validateData should validate field types" name="Validation Middleware validateData should validate field types" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware validateData should validate patterns" name="Validation Middleware validateData should validate patterns" time="0">
    </testcase>
    <testcase classname="Validation Middleware validateData should validate length constraints" name="Validation Middleware validateData should validate length constraints" time="0">
    </testcase>
    <testcase classname="Validation Middleware validateData should validate range constraints" name="Validation Middleware validateData should validate range constraints" time="0">
    </testcase>
    <testcase classname="Validation Middleware validateData should validate nested objects" name="Validation Middleware validateData should validate nested objects" time="0">
    </testcase>
    <testcase classname="Validation Middleware validateData should validate arrays" name="Validation Middleware validateData should validate arrays" time="0">
    </testcase>
    <testcase classname="Validation Middleware validateData should skip validation for non-required empty fields" name="Validation Middleware validateData should skip validation for non-required empty fields" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware createValidationMiddleware should return 500 when schema is not found" name="Validation Middleware createValidationMiddleware should return 500 when schema is not found" time="0.018">
    </testcase>
    <testcase classname="Validation Middleware createValidationMiddleware should validate body data by default" name="Validation Middleware createValidationMiddleware should validate body data by default" time="0.004">
    </testcase>
    <testcase classname="Validation Middleware createValidationMiddleware should validate query data when specified" name="Validation Middleware createValidationMiddleware should validate query data when specified" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware createValidationMiddleware should validate params data when specified" name="Validation Middleware createValidationMiddleware should validate params data when specified" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware createValidationMiddleware should call next() when validation passes" name="Validation Middleware createValidationMiddleware should call next() when validation passes" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware createValidationMiddleware should log validation errors" name="Validation Middleware createValidationMiddleware should log validation errors" time="0">
    </testcase>
    <testcase classname="Validation Middleware createValidationMiddleware should log successful validations" name="Validation Middleware createValidationMiddleware should log successful validations" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware Predefined Validation Middleware validateUser should validate user data correctly" name="Validation Middleware Predefined Validation Middleware validateUser should validate user data correctly" time="0">
    </testcase>
    <testcase classname="Validation Middleware Predefined Validation Middleware validateUser should reject invalid user data" name="Validation Middleware Predefined Validation Middleware validateUser should reject invalid user data" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware Predefined Validation Middleware validateProfile should validate profile data correctly" name="Validation Middleware Predefined Validation Middleware validateProfile should validate profile data correctly" time="0">
    </testcase>
    <testcase classname="Validation Middleware Predefined Validation Middleware validateProfile should reject invalid profile data" name="Validation Middleware Predefined Validation Middleware validateProfile should reject invalid profile data" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware Predefined Validation Middleware validateBooking should validate booking data correctly" name="Validation Middleware Predefined Validation Middleware validateBooking should validate booking data correctly" time="0">
    </testcase>
    <testcase classname="Validation Middleware Predefined Validation Middleware validateBooking should reject invalid booking data" name="Validation Middleware Predefined Validation Middleware validateBooking should reject invalid booking data" time="0">
    </testcase>
    <testcase classname="Validation Middleware Error Handling should handle validation exceptions gracefully" name="Validation Middleware Error Handling should handle validation exceptions gracefully" time="0">
    </testcase>
    <testcase classname="Validation Middleware Integration should work with real Express app" name="Validation Middleware Integration should work with real Express app" time="0.023">
    </testcase>
  </testsuite>
  <testsuite name="Manager routes" errors="0" failures="0" skipped="0" timestamp="2025-08-19T18:25:16" time="0.181" tests="37">
    <testcase classname="Manager routes Authentication and Authorization should allow access with correct role" name="Manager routes Authentication and Authorization should allow access with correct role" time="0.005">
    </testcase>
    <testcase classname="Manager routes User management routes should handle GET /users" name="Manager routes User management routes should handle GET /users" time="0.002">
    </testcase>
    <testcase classname="Manager routes User management routes should handle GET /users/:id" name="Manager routes User management routes should handle GET /users/:id" time="0.003">
    </testcase>
    <testcase classname="Manager routes User management routes should handle POST /users" name="Manager routes User management routes should handle POST /users" time="0.007">
    </testcase>
    <testcase classname="Manager routes User management routes should handle PUT /users/:id" name="Manager routes User management routes should handle PUT /users/:id" time="0.001">
    </testcase>
    <testcase classname="Manager routes User management routes should handle DELETE /users/:id" name="Manager routes User management routes should handle DELETE /users/:id" time="0.002">
    </testcase>
    <testcase classname="Manager routes User management routes should handle POST /users/:id/status" name="Manager routes User management routes should handle POST /users/:id/status" time="0.001">
    </testcase>
    <testcase classname="Manager routes User management routes should handle POST /users/:id/role" name="Manager routes User management routes should handle POST /users/:id/role" time="0.003">
    </testcase>
    <testcase classname="Manager routes Profile management routes should handle GET /profiles" name="Manager routes Profile management routes should handle GET /profiles" time="0.002">
    </testcase>
    <testcase classname="Manager routes Profile management routes should handle GET /profiles/:id" name="Manager routes Profile management routes should handle GET /profiles/:id" time="0.005">
    </testcase>
    <testcase classname="Manager routes Profile management routes should handle PUT /profiles/:id" name="Manager routes Profile management routes should handle PUT /profiles/:id" time="0.004">
    </testcase>
    <testcase classname="Manager routes Profile management routes should handle DELETE /profiles/:id" name="Manager routes Profile management routes should handle DELETE /profiles/:id" time="0.002">
    </testcase>
    <testcase classname="Manager routes Profile management routes should handle POST /profiles/:id/restore" name="Manager routes Profile management routes should handle POST /profiles/:id/restore" time="0.002">
    </testcase>
    <testcase classname="Manager routes Profile management routes should handle GET /profiles/stats" name="Manager routes Profile management routes should handle GET /profiles/stats" time="0.001">
    </testcase>
    <testcase classname="Manager routes Booking management routes should handle GET /bookings" name="Manager routes Booking management routes should handle GET /bookings" time="0.003">
    </testcase>
    <testcase classname="Manager routes Booking management routes should handle GET /bookings/:id" name="Manager routes Booking management routes should handle GET /bookings/:id" time="0.002">
    </testcase>
    <testcase classname="Manager routes Booking management routes should handle POST /bookings" name="Manager routes Booking management routes should handle POST /bookings" time="0.002">
    </testcase>
    <testcase classname="Manager routes Booking management routes should handle PUT /bookings/:id" name="Manager routes Booking management routes should handle PUT /bookings/:id" time="0.002">
    </testcase>
    <testcase classname="Manager routes Booking management routes should handle DELETE /bookings/:id" name="Manager routes Booking management routes should handle DELETE /bookings/:id" time="0.003">
    </testcase>
    <testcase classname="Manager routes Booking management routes should handle GET /bookings/stats" name="Manager routes Booking management routes should handle GET /bookings/stats" time="0.002">
    </testcase>
    <testcase classname="Manager routes Journey management routes should handle GET /journeys" name="Manager routes Journey management routes should handle GET /journeys" time="0.001">
    </testcase>
    <testcase classname="Manager routes Journey management routes should handle GET /journeys/:id" name="Manager routes Journey management routes should handle GET /journeys/:id" time="0.004">
    </testcase>
    <testcase classname="Manager routes Journey management routes should handle POST /journeys" name="Manager routes Journey management routes should handle POST /journeys" time="0.004">
    </testcase>
    <testcase classname="Manager routes Journey management routes should handle PUT /journeys/:id" name="Manager routes Journey management routes should handle PUT /journeys/:id" time="0.002">
    </testcase>
    <testcase classname="Manager routes Journey management routes should handle DELETE /journeys/:id" name="Manager routes Journey management routes should handle DELETE /journeys/:id" time="0.002">
    </testcase>
    <testcase classname="Manager routes Journey management routes should handle POST /journeys/:id/assign-guide" name="Manager routes Journey management routes should handle POST /journeys/:id/assign-guide" time="0.004">
    </testcase>
    <testcase classname="Manager routes Journey management routes should handle GET /journeys/stats" name="Manager routes Journey management routes should handle GET /journeys/stats" time="0.002">
    </testcase>
    <testcase classname="Manager routes Provider management routes should handle GET /providers" name="Manager routes Provider management routes should handle GET /providers" time="0.003">
    </testcase>
    <testcase classname="Manager routes Provider management routes should handle GET /providers/:id" name="Manager routes Provider management routes should handle GET /providers/:id" time="0.002">
    </testcase>
    <testcase classname="Manager routes Provider management routes should handle POST /providers" name="Manager routes Provider management routes should handle POST /providers" time="0.003">
    </testcase>
    <testcase classname="Manager routes Provider management routes should handle PUT /providers/:id" name="Manager routes Provider management routes should handle PUT /providers/:id" time="0.002">
    </testcase>
    <testcase classname="Manager routes Provider management routes should handle DELETE /providers/:id" name="Manager routes Provider management routes should handle DELETE /providers/:id" time="0.004">
    </testcase>
    <testcase classname="Manager routes Provider management routes should handle POST /providers/:id/restore" name="Manager routes Provider management routes should handle POST /providers/:id/restore" time="0.003">
    </testcase>
    <testcase classname="Manager routes Provider management routes should handle GET /providers/stats" name="Manager routes Provider management routes should handle GET /providers/stats" time="0.004">
    </testcase>
    <testcase classname="Manager routes Provider management routes should handle GET /providers/search" name="Manager routes Provider management routes should handle GET /providers/search" time="0.001">
    </testcase>
    <testcase classname="Manager routes System management routes should handle GET /system/stats" name="Manager routes System management routes should handle GET /system/stats" time="0.002">
    </testcase>
    <testcase classname="Manager routes System management routes should handle GET /system/health" name="Manager routes System management routes should handle GET /system/health" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Rate Limiter Middleware" errors="0" failures="0" skipped="0" timestamp="2025-08-19T18:25:16" time="0.085" tests="26">
    <testcase classname="Rate Limiter Middleware createRateLimiter should create rate limiter with default options" name="Rate Limiter Middleware createRateLimiter should create rate limiter with default options" time="0.002">
    </testcase>
    <testcase classname="Rate Limiter Middleware createRateLimiter should create rate limiter with custom options" name="Rate Limiter Middleware createRateLimiter should create rate limiter with custom options" time="0">
    </testcase>
    <testcase classname="Rate Limiter Middleware createRateLimiter should handle custom keyGenerator function" name="Rate Limiter Middleware createRateLimiter should handle custom keyGenerator function" time="0.001">
    </testcase>
    <testcase classname="Rate Limiter Middleware Client Identification should use IP address when user is not authenticated" name="Rate Limiter Middleware Client Identification should use IP address when user is not authenticated" time="0">
    </testcase>
    <testcase classname="Rate Limiter Middleware Client Identification should use IP:userId when user is authenticated" name="Rate Limiter Middleware Client Identification should use IP:userId when user is authenticated" time="0.001">
    </testcase>
    <testcase classname="Rate Limiter Middleware Client Identification should fallback to connection.remoteAddress when x-forwarded-for is not available" name="Rate Limiter Middleware Client Identification should fallback to connection.remoteAddress when x-forwarded-for is not available" time="0">
    </testcase>
    <testcase classname="Rate Limiter Middleware Rate Limiting Logic should allow requests within limit" name="Rate Limiter Middleware Rate Limiting Logic should allow requests within limit" time="0.001">
    </testcase>
    <testcase classname="Rate Limiter Middleware Rate Limiting Logic should block requests when limit is exceeded" name="Rate Limiter Middleware Rate Limiting Logic should block requests when limit is exceeded" time="0.006">
    </testcase>
    <testcase classname="Rate Limiter Middleware Rate Limiting Logic should reset counter after window expires" name="Rate Limiter Middleware Rate Limiting Logic should reset counter after window expires" time="0">
    </testcase>
    <testcase classname="Rate Limiter Middleware Rate Limit Headers should set standard rate limit headers" name="Rate Limiter Middleware Rate Limit Headers should set standard rate limit headers" time="0.001">
    </testcase>
    <testcase classname="Rate Limiter Middleware Rate Limit Headers should set legacy rate limit headers when enabled" name="Rate Limiter Middleware Rate Limit Headers should set legacy rate limit headers when enabled" time="0">
    </testcase>
    <testcase classname="Rate Limiter Middleware Rate Limit Headers should set remaining to 0 when limit is exceeded" name="Rate Limiter Middleware Rate Limit Headers should set remaining to 0 when limit is exceeded" time="0">
    </testcase>
    <testcase classname="Rate Limiter Middleware Predefined Rate Limiters strict should have correct default settings" name="Rate Limiter Middleware Predefined Rate Limiters strict should have correct default settings" time="0.001">
    </testcase>
    <testcase classname="Rate Limiter Middleware Predefined Rate Limiters standard should have correct default settings" name="Rate Limiter Middleware Predefined Rate Limiters standard should have correct default settings" time="0.008">
    </testcase>
    <testcase classname="Rate Limiter Middleware Predefined Rate Limiters loose should have correct default settings" name="Rate Limiter Middleware Predefined Rate Limiters loose should have correct default settings" time="0.006">
    </testcase>
    <testcase classname="Rate Limiter Middleware Predefined Rate Limiters api should use user ID when authenticated" name="Rate Limiter Middleware Predefined Rate Limiters api should use user ID when authenticated" time="0">
    </testcase>
    <testcase classname="Rate Limiter Middleware Predefined Rate Limiters api should fallback to IP when not authenticated" name="Rate Limiter Middleware Predefined Rate Limiters api should fallback to IP when not authenticated" time="0.001">
    </testcase>
    <testcase classname="Rate Limiter Middleware Logging should log rate limit checks" name="Rate Limiter Middleware Logging should log rate limit checks" time="0.001">
    </testcase>
    <testcase classname="Rate Limiter Middleware Logging should log rate limit exceeded events" name="Rate Limiter Middleware Logging should log rate limit exceeded events" time="0">
    </testcase>
    <testcase classname="Rate Limiter Middleware Logging should log successful rate limit checks" name="Rate Limiter Middleware Logging should log successful rate limit checks" time="0.001">
    </testcase>
    <testcase classname="Rate Limiter Middleware Custom Handlers should call custom handler when limit is exceeded" name="Rate Limiter Middleware Custom Handlers should call custom handler when limit is exceeded" time="0">
    </testcase>
    <testcase classname="Rate Limiter Middleware Custom Handlers should call onLimitReached callback when limit is exceeded" name="Rate Limiter Middleware Custom Handlers should call onLimitReached callback when limit is exceeded" time="0">
    </testcase>
    <testcase classname="Rate Limiter Middleware applyRateLimiting should apply rate limiting to routes" name="Rate Limiter Middleware applyRateLimiting should apply rate limiting to routes" time="0.003">
    </testcase>
    <testcase classname="Rate Limiter Middleware applyRateLimiting should handle custom middleware functions" name="Rate Limiter Middleware applyRateLimiting should handle custom middleware functions" time="0">
    </testcase>
    <testcase classname="Rate Limiter Middleware Memory Management should clean expired entries periodically" name="Rate Limiter Middleware Memory Management should clean expired entries periodically" time="0.003">
    </testcase>
    <testcase classname="Rate Limiter Middleware Error Handling should handle errors gracefully" name="Rate Limiter Middleware Error Handling should handle errors gracefully" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Auth Middleware" errors="0" failures="0" skipped="0" timestamp="2025-08-19T18:25:16" time="0.11" tests="18">
    <testcase classname="Auth Middleware Token Validation should return 401 when no token is provided" name="Auth Middleware Token Validation should return 401 when no token is provided" time="0.011">
    </testcase>
    <testcase classname="Auth Middleware Token Validation should return 401 when token format is invalid" name="Auth Middleware Token Validation should return 401 when token format is invalid" time="0.001">
    </testcase>
    <testcase classname="Auth Middleware Token Validation should return 401 when token is too short" name="Auth Middleware Token Validation should return 401 when token is too short" time="0.003">
    </testcase>
    <testcase classname="Auth Middleware JWT Verification should return 401 when JWT verification fails" name="Auth Middleware JWT Verification should return 401 when JWT verification fails" time="0.002">
    </testcase>
    <testcase classname="Auth Middleware JWT Verification should return 401 when token has expired" name="Auth Middleware JWT Verification should return 401 when token has expired" time="0.001">
    </testcase>
    <testcase classname="Auth Middleware JWT Verification should return 401 when token has invalid signature" name="Auth Middleware JWT Verification should return 401 when token has invalid signature" time="0.003">
    </testcase>
    <testcase classname="Auth Middleware Token Claims Validation should return 401 when token is missing userId" name="Auth Middleware Token Claims Validation should return 401 when token is missing userId" time="0.003">
    </testcase>
    <testcase classname="Auth Middleware Token Claims Validation should return 401 when token is missing email" name="Auth Middleware Token Claims Validation should return 401 when token is missing email" time="0.003">
    </testcase>
    <testcase classname="Auth Middleware Successful Authentication should call next() when token is valid" name="Auth Middleware Successful Authentication should call next() when token is valid" time="0.002">
    </testcase>
    <testcase classname="Auth Middleware Successful Authentication should set user object in request" name="Auth Middleware Successful Authentication should set user object in request" time="0.001">
    </testcase>
    <testcase classname="Auth Middleware Successful Authentication should set authToken in request" name="Auth Middleware Successful Authentication should set authToken in request" time="0.002">
    </testcase>
    <testcase classname="Auth Middleware Successful Authentication should set authTime in request" name="Auth Middleware Successful Authentication should set authTime in request" time="0.002">
    </testcase>
    <testcase classname="Auth Middleware Successful Authentication should set jwtPayload in request" name="Auth Middleware Successful Authentication should set jwtPayload in request" time="0.002">
    </testcase>
    <testcase classname="Auth Middleware Error Handling should handle unexpected errors gracefully" name="Auth Middleware Error Handling should handle unexpected errors gracefully" time="0.001">
    </testcase>
    <testcase classname="Auth Middleware Edge Cases should handle Bearer token with extra spaces" name="Auth Middleware Edge Cases should handle Bearer token with extra spaces" time="0.001">
    </testcase>
    <testcase classname="Auth Middleware Edge Cases should handle different IP address sources" name="Auth Middleware Edge Cases should handle different IP address sources" time="0.001">
    </testcase>
    <testcase classname="Auth Middleware Edge Cases should set default role when not provided in token" name="Auth Middleware Edge Cases should set default role when not provided in token" time="0.001">
    </testcase>
    <testcase classname="Auth Middleware Performance should complete authentication within reasonable time" name="Auth Middleware Performance should complete authentication within reasonable time" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="CanAccessOwnData Middleware" errors="0" failures="0" skipped="0" timestamp="2025-08-19T18:25:16" time="0.091" tests="23">
    <testcase classname="CanAccessOwnData Middleware User Authentication Check should return 401 when user is not authenticated" name="CanAccessOwnData Middleware User Authentication Check should return 401 when user is not authenticated" time="0.012">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware User Authentication Check should return 401 when req.user is null" name="CanAccessOwnData Middleware User Authentication Check should return 401 when req.user is null" time="0.001">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware User Authentication Check should return 401 when req.user.id is undefined" name="CanAccessOwnData Middleware User Authentication Check should return 401 when req.user.id is undefined" time="0">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware UserId Parameter Validation should return 400 when userId parameter is missing" name="CanAccessOwnData Middleware UserId Parameter Validation should return 400 when userId parameter is missing" time="0.001">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware UserId Parameter Validation should return 400 when userId parameter is undefined" name="CanAccessOwnData Middleware UserId Parameter Validation should return 400 when userId parameter is undefined" time="0.001">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware UserId Parameter Validation should return 400 when userId parameter is null" name="CanAccessOwnData Middleware UserId Parameter Validation should return 400 when userId parameter is null" time="0">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware UserId Format Validation should return 400 when userId parameter is empty string" name="CanAccessOwnData Middleware UserId Format Validation should return 400 when userId parameter is empty string" time="0">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware UserId Format Validation should return 400 when userId parameter is whitespace only" name="CanAccessOwnData Middleware UserId Format Validation should return 400 when userId parameter is whitespace only" time="0.001">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware UserId Format Validation should return 400 when userId parameter is too short after trimming" name="CanAccessOwnData Middleware UserId Format Validation should return 400 when userId parameter is too short after trimming" time="0.001">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware Access Control Logic should allow access when user ID matches userId parameter" name="CanAccessOwnData Middleware Access Control Logic should allow access when user ID matches userId parameter" time="0.001">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware Access Control Logic should allow access when user ID matches userId parameter after trimming" name="CanAccessOwnData Middleware Access Control Logic should allow access when user ID matches userId parameter after trimming" time="0">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware Access Control Logic should deny access when user ID does not match userId parameter" name="CanAccessOwnData Middleware Access Control Logic should deny access when user ID does not match userId parameter" time="0.001">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware Access Control Logic should deny access when user ID does not match userId parameter (case sensitive)" name="CanAccessOwnData Middleware Access Control Logic should deny access when user ID does not match userId parameter (case sensitive)" time="0">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware Request Enhancement should add accessControlTime to request object" name="CanAccessOwnData Middleware Request Enhancement should add accessControlTime to request object" time="0">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware Request Enhancement should add requestedUserId to request object" name="CanAccessOwnData Middleware Request Enhancement should add requestedUserId to request object" time="0.001">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware Request Enhancement should add requestedUserId after trimming" name="CanAccessOwnData Middleware Request Enhancement should add requestedUserId after trimming" time="0.001">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware Error Handling should handle unexpected errors gracefully" name="CanAccessOwnData Middleware Error Handling should handle unexpected errors gracefully" time="0.023">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware Edge Cases should handle numeric user IDs" name="CanAccessOwnData Middleware Edge Cases should handle numeric user IDs" time="0.001">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware Edge Cases should handle UUID user IDs" name="CanAccessOwnData Middleware Edge Cases should handle UUID user IDs" time="0.001">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware Edge Cases should handle special characters in user IDs" name="CanAccessOwnData Middleware Edge Cases should handle special characters in user IDs" time="0">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware Performance should complete access control check within reasonable time" name="CanAccessOwnData Middleware Performance should complete access control check within reasonable time" time="0.001">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware Integration Scenarios should work with different HTTP methods" name="CanAccessOwnData Middleware Integration Scenarios should work with different HTTP methods" time="0.002">
    </testcase>
    <testcase classname="CanAccessOwnData Middleware Integration Scenarios should work with different URL patterns" name="CanAccessOwnData Middleware Integration Scenarios should work with different URL patterns" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Authorize Middleware" errors="0" failures="0" skipped="0" timestamp="2025-08-19T18:25:16" time="0.078" tests="20">
    <testcase classname="Authorize Middleware User Authentication Check should return 401 when user is not authenticated" name="Authorize Middleware User Authentication Check should return 401 when user is not authenticated" time="0.01">
    </testcase>
    <testcase classname="Authorize Middleware User Authentication Check should return 401 when req.user is null" name="Authorize Middleware User Authentication Check should return 401 when req.user is null" time="0.001">
    </testcase>
    <testcase classname="Authorize Middleware Role Assignment Check should return 403 when user has no role assigned" name="Authorize Middleware Role Assignment Check should return 403 when user has no role assigned" time="0">
    </testcase>
    <testcase classname="Authorize Middleware Role Assignment Check should return 403 when user.role is null" name="Authorize Middleware Role Assignment Check should return 403 when user.role is null" time="0.001">
    </testcase>
    <testcase classname="Authorize Middleware Role Assignment Check should return 403 when user.role is undefined" name="Authorize Middleware Role Assignment Check should return 403 when user.role is undefined" time="0">
    </testcase>
    <testcase classname="Authorize Middleware Role Validation - Single Role should allow access when user role matches single allowed role" name="Authorize Middleware Role Validation - Single Role should allow access when user role matches single allowed role" time="0.001">
    </testcase>
    <testcase classname="Authorize Middleware Role Validation - Single Role should deny access when user role does not match single allowed role" name="Authorize Middleware Role Validation - Single Role should deny access when user role does not match single allowed role" time="0">
    </testcase>
    <testcase classname="Authorize Middleware Role Validation - Multiple Roles should allow access when user role is in allowed roles array" name="Authorize Middleware Role Validation - Multiple Roles should allow access when user role is in allowed roles array" time="0">
    </testcase>
    <testcase classname="Authorize Middleware Role Validation - Multiple Roles should allow access when user role is in allowed roles array (different position)" name="Authorize Middleware Role Validation - Multiple Roles should allow access when user role is in allowed roles array (different position)" time="0">
    </testcase>
    <testcase classname="Authorize Middleware Role Validation - Multiple Roles should deny access when user role is not in allowed roles array" name="Authorize Middleware Role Validation - Multiple Roles should deny access when user role is not in allowed roles array" time="0">
    </testcase>
    <testcase classname="Authorize Middleware User Metadata Role Fallback should use user_metadata.role when user.role is not available" name="Authorize Middleware User Metadata Role Fallback should use user_metadata.role when user.role is not available" time="0.002">
    </testcase>
    <testcase classname="Authorize Middleware User Metadata Role Fallback should prioritize user.role over user_metadata.role" name="Authorize Middleware User Metadata Role Fallback should prioritize user.role over user_metadata.role" time="0.001">
    </testcase>
    <testcase classname="Authorize Middleware Request Enhancement should add userRole to request object" name="Authorize Middleware Request Enhancement should add userRole to request object" time="0">
    </testcase>
    <testcase classname="Authorize Middleware Request Enhancement should add authorizedRoles to request object" name="Authorize Middleware Request Enhancement should add authorizedRoles to request object" time="0">
    </testcase>
    <testcase classname="Authorize Middleware Request Enhancement should add authorizationTime to request object" name="Authorize Middleware Request Enhancement should add authorizationTime to request object" time="0.001">
    </testcase>
    <testcase classname="Authorize Middleware Error Handling should handle unexpected errors gracefully" name="Authorize Middleware Error Handling should handle unexpected errors gracefully" time="0.013">
    </testcase>
    <testcase classname="Authorize Middleware Edge Cases should handle empty allowed roles array" name="Authorize Middleware Edge Cases should handle empty allowed roles array" time="0.001">
    </testcase>
    <testcase classname="Authorize Middleware Edge Cases should handle null allowed roles" name="Authorize Middleware Edge Cases should handle null allowed roles" time="0">
    </testcase>
    <testcase classname="Authorize Middleware Edge Cases should handle undefined allowed roles" name="Authorize Middleware Edge Cases should handle undefined allowed roles" time="0">
    </testcase>
    <testcase classname="Authorize Middleware Performance should complete authorization within reasonable time" name="Authorize Middleware Performance should complete authorization within reasonable time" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Provider Controller" errors="0" failures="36" skipped="0" timestamp="2025-08-19T18:25:13" time="3.629" tests="48">
    <testcase classname="Provider Controller getAllProviders should get all providers for agents/managers" name="Provider Controller getAllProviders should get all providers for agents/managers" time="0.518">
    </testcase>
    <testcase classname="Provider Controller getAllProviders should filter providers by type" name="Provider Controller getAllProviders should filter providers by type" time="0.137">
    </testcase>
    <testcase classname="Provider Controller getAllProviders should filter providers by rating" name="Provider Controller getAllProviders should filter providers by rating" time="0.012">
    </testcase>
    <testcase classname="Provider Controller getAllProviders should filter providers by location" name="Provider Controller getAllProviders should filter providers by location" time="0.125">
    </testcase>
    <testcase classname="Provider Controller getAllProviders should paginate results" name="Provider Controller getAllProviders should paginate results" time="0.06">
    </testcase>
    <testcase classname="Provider Controller getProviderById should get provider by ID" name="Provider Controller getProviderById should get provider by ID" time="0.074">
    </testcase>
    <testcase classname="Provider Controller getProviderById should return 404 for non-existent provider" name="Provider Controller getProviderById should return 404 for non-existent provider" time="0.051">
    </testcase>
    <testcase classname="Provider Controller getPublicProviders should get public provider information" name="Provider Controller getPublicProviders should get public provider information" time="0.025">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:219:68)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Provider Controller getPublicProviders should filter by type" name="Provider Controller getPublicProviders should filter by type" time="0.042">
    </testcase>
    <testcase classname="Provider Controller getPublicProviders should filter by rating" name="Provider Controller getPublicProviders should filter by rating" time="0.064">
    </testcase>
    <testcase classname="Provider Controller getPublicProviders should filter by location" name="Provider Controller getPublicProviders should filter by location" time="0.054">
    </testcase>
    <testcase classname="Provider Controller getPublicProviderDetails should get public provider details" name="Provider Controller getPublicProviderDetails should get public provider details" time="0.05">
      <failure>Error: expect(received).toBeDefined()

Received: undefined
    at Object.toBeDefined (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:258:41)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Provider Controller getPublicProviderDetails should return 404 for inactive provider" name="Provider Controller getPublicProviderDetails should return 404 for inactive provider" time="0.012">
      <failure>Error: expected 404 &quot;Not Found&quot;, got 200 &quot;OK&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:267:10)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller createProvider should create new provider (manager only)" name="Provider Controller createProvider should create new provider (manager only)" time="0.056">
      <failure>Error: expected 201 &quot;Created&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:295:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller createProvider should validate required fields" name="Provider Controller createProvider should validate required fields" time="0.006">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:307:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller createProvider should validate provider type" name="Provider Controller createProvider should validate provider type" time="0.005">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:321:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller createProvider should validate rating range" name="Provider Controller createProvider should validate rating range" time="0.006">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:336:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller createProvider should prevent duplicate provider names" name="Provider Controller createProvider should prevent duplicate provider names" time="0.008">
      <failure>Error: expected 409 &quot;Conflict&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:350:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller updateProvider should update provider (manager only)" name="Provider Controller updateProvider should update provider (manager only)" time="0.006">
      <failure>Error: expected 200 &quot;OK&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:367:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller updateProvider should validate provider type" name="Provider Controller updateProvider should validate provider type" time="0.006">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:383:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller updateProvider should validate rating range" name="Provider Controller updateProvider should validate rating range" time="0.005">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:396:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller updateProvider should prevent duplicate names on update" name="Provider Controller updateProvider should prevent duplicate names on update" time="0.005">
      <failure>ValidationError: Provider validation failed: address.country: Path `address.country` is required., address.city: Path `address.city` is required., address.street: Path `address.street` is required., contact.primaryContact.phone: Path `contact.primaryContact.phone` is required., contact.primaryContact.email: Path `contact.primaryContact.email` is required., contact.primaryContact.name: Path `contact.primaryContact.name` is required., legalName: Path `legalName` is required.
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Provider Controller updateProviderLimited should update limited provider fields (agent only)" name="Provider Controller updateProviderLimited should update limited provider fields (agent only)" time="0.056">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:435:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller updateProviderLimited should not allow updating restricted fields" name="Provider Controller updateProviderLimited should not allow updating restricted fields" time="0.011">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:453:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller deleteProvider should delete provider (manager only)" name="Provider Controller deleteProvider should delete provider (manager only)" time="0.007">
      <failure>Error: expected 200 &quot;OK&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:467:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller deleteProvider should not delete provider with active journeys" name="Provider Controller deleteProvider should not delete provider with active journeys" time="0.011">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:475:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller restoreProvider should restore deleted provider (manager only)" name="Provider Controller restoreProvider should restore deleted provider (manager only)" time="0.006">
      <failure>TypeError: testProvider.meta.delete is not a function
    at Object.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:484:31)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)</failure>
    </testcase>
    <testcase classname="Provider Controller restoreProvider should not restore non-deleted provider" name="Provider Controller restoreProvider should not restore non-deleted provider" time="0.011">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:498:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller getProviderStats should get provider statistics (manager only)" name="Provider Controller getProviderStats should get provider statistics (manager only)" time="0.01">
      <failure>Error: expected 200 &quot;OK&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:508:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller getProviderStats should calculate correct statistics" name="Provider Controller getProviderStats should calculate correct statistics" time="0.008">
      <failure>ValidationError: Provider validation failed: address.country: Path `address.country` is required., address.city: Path `address.city` is required., address.street: Path `address.street` is required., contact.primaryContact.phone: Path `contact.primaryContact.phone` is required., contact.primaryContact.email: Path `contact.primaryContact.email` is required., contact.primaryContact.name: Path `contact.primaryContact.name` is required., legalName: Path `legalName` is required.
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Provider Controller searchProviders should search providers by query" name="Provider Controller searchProviders should search providers by query" time="0.007">
      <failure>Error: expected 200 &quot;OK&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:547:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller searchProviders should filter by type and rating" name="Provider Controller searchProviders should filter by type and rating" time="0.01">
      <failure>Error: expected 200 &quot;OK&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:556:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller searchProviders should filter by location" name="Provider Controller searchProviders should filter by location" time="0.012">
      <failure>Error: expected 200 &quot;OK&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:565:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller searchProviders should paginate search results" name="Provider Controller searchProviders should paginate search results" time="0.009">
      <failure>Error: expected 200 &quot;OK&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:575:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller Error Handling should handle database errors gracefully" name="Provider Controller Error Handling should handle database errors gracefully" time="0.013">
    </testcase>
    <testcase classname="Provider Controller Error Handling should validate ObjectId format" name="Provider Controller Error Handling should validate ObjectId format" time="0.009">
    </testcase>
    <testcase classname="Provider Controller Data Validation should validate email format in contact" name="Provider Controller Data Validation should validate email format in contact" time="0.008">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:619:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller Data Validation should validate phone format in contact" name="Provider Controller Data Validation should validate phone format in contact" time="0.012">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:637:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller Data Validation should validate website URL format" name="Provider Controller Data Validation should validate website URL format" time="0.01">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:652:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller Business Logic should prevent deletion of providers with active journeys" name="Provider Controller Business Logic should prevent deletion of providers with active journeys" time="0.007">
      <failure>ValidationError: Journey validation failed: schedule.endDate: Path `schedule.endDate` is required., schedule.startDate: Path `schedule.startDate` is required., capacity.maxParticipants: Path `capacity.maxParticipants` is required., pricing.basePrice: Path `pricing.basePrice` is required., duration.nights: Path `duration.nights` is required., duration.days: Path `duration.days` is required., type: Path `type` is required., category: `culture` is not a valid enum value for path `category`.
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Provider Controller Business Logic should allow deletion of providers with inactive journeys" name="Provider Controller Business Logic should allow deletion of providers with inactive journeys" time="0.008">
      <failure>ValidationError: Journey validation failed: schedule.endDate: Path `schedule.endDate` is required., schedule.startDate: Path `schedule.startDate` is required., capacity.maxParticipants: Path `capacity.maxParticipants` is required., pricing.basePrice: Path `pricing.basePrice` is required., duration.nights: Path `duration.nights` is required., duration.days: Path `duration.days` is required., type: Path `type` is required., category: `culture` is not a valid enum value for path `category`.
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Provider Controller Business Logic should calculate average rating correctly" name="Provider Controller Business Logic should calculate average rating correctly" time="0.008">
      <failure>ValidationError: Provider validation failed: address.country: Path `address.country` is required., address.city: Path `address.city` is required., address.street: Path `address.street` is required., contact.primaryContact.phone: Path `contact.primaryContact.phone` is required., contact.primaryContact.email: Path `contact.primaryContact.email` is required., contact.primaryContact.name: Path `contact.primaryContact.name` is required., legalName: Path `legalName` is required.
    at model.Document.invalidate (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3352:32)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/document.js:3113:17
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/mongoose/lib/schemaType.js:1410:9
    at processTicksAndRejections (node:internal/process/task_queues:77:11)</failure>
    </testcase>
    <testcase classname="Provider Controller Provider Type Validation should accept valid provider types" name="Provider Controller Provider Type Validation should accept valid provider types" time="0.007">
      <failure>Error: expected 201 &quot;Created&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:737:12)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller Provider Type Validation should reject invalid provider types" name="Provider Controller Provider Type Validation should reject invalid provider types" time="0.007">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:755:12)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller Rating System should handle decimal ratings" name="Provider Controller Rating System should handle decimal ratings" time="0.007">
      <failure>Error: expected 201 &quot;Created&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:773:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller Rating System should handle zero rating" name="Provider Controller Rating System should handle zero rating" time="0.01">
      <failure>Error: expected 201 &quot;Created&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:788:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller Rating System should reject negative ratings" name="Provider Controller Rating System should reject negative ratings" time="0.009">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:803:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Provider Controller Rating System should reject ratings above 5" name="Provider Controller Rating System should reject ratings above 5" time="0.006">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 403 &quot;Forbidden&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/controllers/__test__/provider.test.js:818:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Validation Middleware Tests" errors="0" failures="4" skipped="0" timestamp="2025-08-19T18:25:16" time="1.097" tests="5">
    <testcase classname="Validation Middleware Tests User Registration Validation should validate missing email" name="Validation Middleware Tests User Registration Validation should validate missing email" time="0.055">
      <failure></failure>
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;Validation failed&quot;
Received: &quot;Email and password are required&quot;
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/validation.test.js:56:30)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Validation Middleware Tests User Registration Validation should validate invalid email format" name="Validation Middleware Tests User Registration Validation should validate invalid email format" time="0.038">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/validation.test.js:76:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at Server.emit (node:domain:489:12)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Validation Middleware Tests User Registration Validation should validate weak password" name="Validation Middleware Tests User Registration Validation should validate weak password" time="0.017">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;Validation failed&quot;
Received: &quot;Password must contain at least 8 characters, one uppercase letter, one lowercase letter, one number, and one special character&quot;
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/validation.test.js:100:30)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Validation Middleware Tests User Login Validation should validate missing email in login" name="Validation Middleware Tests User Login Validation should validate missing email in login" time="0.009">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;Validation failed&quot;
Received: &quot;Email and password are required&quot;
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/validation.test.js:121:30)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Validation Middleware Tests Health Check should return health status" name="Validation Middleware Tests Health Check should return health status" time="0.011">
    </testcase>
  </testsuite>
  <testsuite name="Authentication and Validation Tests" errors="0" failures="11" skipped="0" timestamp="2025-08-19T18:25:16" time="1.245" tests="18">
    <testcase classname="Authentication and Validation Tests User Registration Validation should register user with valid data" name="Authentication and Validation Tests User Registration Validation should register user with valid data" time="0.086">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/auth.test.js:55:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at Server.emit (node:domain:489:12)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Authentication and Validation Tests User Registration Validation should reject registration with missing email" name="Authentication and Validation Tests User Registration Validation should reject registration with missing email" time="0.016">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;Validation failed&quot;
Received: &quot;Email and password are required&quot;
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/auth.test.js:74:30)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication and Validation Tests User Registration Validation should reject registration with invalid email format" name="Authentication and Validation Tests User Registration Validation should reject registration with invalid email format" time="0.012">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/auth.test.js:94:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at Server.emit (node:domain:489:12)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Authentication and Validation Tests User Registration Validation should reject registration with weak password" name="Authentication and Validation Tests User Registration Validation should reject registration with weak password" time="0.01">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;Validation failed&quot;
Received: &quot;Password must contain at least 8 characters, one uppercase letter, one lowercase letter, one number, and one special character&quot;
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/auth.test.js:118:30)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication and Validation Tests User Registration Validation should reject registration with invalid firstname" name="Authentication and Validation Tests User Registration Validation should reject registration with invalid firstname" time="0.006">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/auth.test.js:138:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at Server.emit (node:domain:489:12)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Authentication and Validation Tests User Login Validation should login with valid credentials" name="Authentication and Validation Tests User Login Validation should login with valid credentials" time="0.005">
      <failure>Error: expected 200 &quot;OK&quot;, got 401 &quot;Unauthorized&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/auth.test.js:160:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at Server.emit (node:domain:489:12)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Authentication and Validation Tests User Login Validation should reject login with missing email" name="Authentication and Validation Tests User Login Validation should reject login with missing email" time="0.007">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;Validation failed&quot;
Received: &quot;Email and password are required&quot;
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/auth.test.js:176:30)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Authentication and Validation Tests User Login Validation should reject login with invalid email format" name="Authentication and Validation Tests User Login Validation should reject login with invalid email format" time="0.004">
      <failure>Error: expected 400 &quot;Bad Request&quot;, got 401 &quot;Unauthorized&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/auth.test.js:194:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at Server.emit (node:domain:489:12)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Authentication and Validation Tests Protected Route Access should allow access to customer routes with customer role" name="Authentication and Validation Tests Protected Route Access should allow access to customer routes with customer role" time="0.042">
      <failure>Error: expected 200 &quot;OK&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/auth.test.js:210:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at Server.emit (node:domain:489:12)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Authentication and Validation Tests Protected Route Access should allow access to manager routes with manager role" name="Authentication and Validation Tests Protected Route Access should allow access to manager routes with manager role" time="0.029">
    </testcase>
    <testcase classname="Authentication and Validation Tests Protected Route Access should return 404 for unknown routes" name="Authentication and Validation Tests Protected Route Access should return 404 for unknown routes" time="0.011">
    </testcase>
    <testcase classname="Authentication and Validation Tests Provider Creation Validation should create provider with valid data" name="Authentication and Validation Tests Provider Creation Validation should create provider with valid data" time="0.021">
      <failure>Error: expected 201 &quot;Created&quot;, got 500 &quot;Internal Server Error&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/auth.test.js:257:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at Server.emit (node:domain:489:12)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Authentication and Validation Tests Provider Creation Validation should reject provider creation with missing required fields" name="Authentication and Validation Tests Provider Creation Validation should reject provider creation with missing required fields" time="0.007">
    </testcase>
    <testcase classname="Authentication and Validation Tests Provider Creation Validation should reject provider creation with invalid type" name="Authentication and Validation Tests Provider Creation Validation should reject provider creation with invalid type" time="0.007">
    </testcase>
    <testcase classname="Authentication and Validation Tests Provider Creation Validation should reject provider creation with invalid rating" name="Authentication and Validation Tests Provider Creation Validation should reject provider creation with invalid rating" time="0.007">
    </testcase>
    <testcase classname="Authentication and Validation Tests Journey Creation Validation should create journey with valid data" name="Authentication and Validation Tests Journey Creation Validation should create journey with valid data" time="0.012">
      <failure>Error: expected 201 &quot;Created&quot;, got 400 &quot;Bad Request&quot;
    at Object.expect (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/auth.test.js:378:10)
    at Promise.finally.completed (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)
    at _callCircusTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at _runTestsForDescribeBlock (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
    at run (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
    at runAndTransformResultsToJestFormat (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:101:19)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)
----
    at Test._assertStatus (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:309:14)
    at /Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:365:13
    at Test._assertFunction (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:342:13)
    at Test.assert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:195:23)
    at localAssert (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:138:14)
    at Server.&lt;anonymous&gt; (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/supertest/lib/test.js:152:11)
    at Object.onceWrapper (node:events:638:28)
    at Server.emit (node:events:524:28)
    at Server.emit (node:domain:489:12)
    at emitCloseNT (node:net:2344:8)
    at processTicksAndRejections (node:internal/process/task_queues:81:21)</failure>
    </testcase>
    <testcase classname="Authentication and Validation Tests Journey Creation Validation should reject journey creation with missing required fields" name="Authentication and Validation Tests Journey Creation Validation should reject journey creation with missing required fields" time="0.007">
    </testcase>
    <testcase classname="Authentication and Validation Tests Journey Creation Validation should reject journey creation with invalid category" name="Authentication and Validation Tests Journey Creation Validation should reject journey creation with invalid category" time="0.007">
    </testcase>
  </testsuite>
  <testsuite name="User Model" errors="0" failures="0" skipped="0" timestamp="2025-08-19T18:25:13" time="5.809" tests="25">
    <testcase classname="User Model Schema Definition should have all required fields" name="User Model Schema Definition should have all required fields" time="0.065">
    </testcase>
    <testcase classname="User Model Schema Definition should set default values correctly" name="User Model Schema Definition should set default values correctly" time="0.012">
    </testcase>
    <testcase classname="User Model Validation should require email" name="User Model Validation should require email" time="0.024">
    </testcase>
    <testcase classname="User Model Validation should require password" name="User Model Validation should require password" time="0.026">
    </testcase>
    <testcase classname="User Model Validation should validate email format" name="User Model Validation should validate email format" time="0.014">
    </testcase>
    <testcase classname="User Model Validation should validate password strength" name="User Model Validation should validate password strength" time="0.009">
    </testcase>
    <testcase classname="User Model Validation should validate role enum" name="User Model Validation should validate role enum" time="0.011">
    </testcase>
    <testcase classname="User Model Validation should validate status enum" name="User Model Validation should validate status enum" time="0.015">
    </testcase>
    <testcase classname="User Model Password Hashing should hash password on save" name="User Model Password Hashing should hash password on save" time="0.478">
    </testcase>
    <testcase classname="User Model Password Hashing should not hash password if not modified" name="User Model Password Hashing should not hash password if not modified" time="0.294">
    </testcase>
    <testcase classname="User Model Profile Creation should require profileId when creating user" name="User Model Profile Creation should require profileId when creating user" time="0.004">
    </testcase>
    <testcase classname="User Model Profile Creation should work with valid profileId" name="User Model Profile Creation should work with valid profileId" time="0.28">
    </testcase>
    <testcase classname="User Model Meta Integration should create meta object automatically" name="User Model Meta Integration should create meta object automatically" time="0.272">
    </testcase>
    <testcase classname="User Model Meta Integration should delegate isLocked to meta" name="User Model Meta Integration should delegate isLocked to meta" time="0.283">
    </testcase>
    <testcase classname="User Model Meta Integration should delegate incLoginAttempts to meta" name="User Model Meta Integration should delegate incLoginAttempts to meta" time="0.305">
    </testcase>
    <testcase classname="User Model Meta Integration should delegate softDelete to meta" name="User Model Meta Integration should delegate softDelete to meta" time="0.285">
    </testcase>
    <testcase classname="User Model Meta Integration should delegate restore to meta" name="User Model Meta Integration should delegate restore to meta" time="0.33">
    </testcase>
    <testcase classname="User Model Instance Methods should compare password correctly" name="User Model Instance Methods should compare password correctly" time="0.858">
    </testcase>
    <testcase classname="User Model Static Methods should find by email" name="User Model Static Methods should find by email" time="0.273">
    </testcase>
    <testcase classname="User Model Static Methods should find active users" name="User Model Static Methods should find active users" time="0.533">
    </testcase>
    <testcase classname="User Model Static Methods should find non-deleted users" name="User Model Static Methods should find non-deleted users" time="0.532">
    </testcase>
    <testcase classname="User Model Virtuals should have fullName virtual" name="User Model Virtuals should have fullName virtual" time="0.264">
    </testcase>
    <testcase classname="User Model Indexes should have proper indexes" name="User Model Indexes should have proper indexes" time="0.004">
    </testcase>
    <testcase classname="User Model Edge Cases should handle missing meta gracefully" name="User Model Edge Cases should handle missing meta gracefully" time="0.004">
    </testcase>
    <testcase classname="User Model Edge Cases should handle validation errors gracefully" name="User Model Edge Cases should handle validation errors gracefully" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="Customer routes" errors="0" failures="11" skipped="0" timestamp="2025-08-19T18:25:13" time="11.451" tests="11">
    <testcase classname="Customer routes Authentication and Authorization should refuse access without token" name="Customer routes Authentication and Authorization should refuse access without token" time="0.075">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 401
Received: 500
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/customer.route.test.js:22:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Customer routes Authentication and Authorization should refuse access with wrong role" name="Customer routes Authentication and Authorization should refuse access with wrong role" time="0.003">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 403
Received: 500
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/customer.route.test.js:35:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Customer routes Authentication and Authorization should allow access with correct role" name="Customer routes Authentication and Authorization should allow access with correct role" time="0.003">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 500
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/customer.route.test.js:54:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Customer routes Booking routes should handle GET /bookings" name="Customer routes Booking routes should handle GET /bookings" time="0.005">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 500
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/customer.route.test.js:69:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Customer routes Booking routes should handle GET /bookings/:id" name="Customer routes Booking routes should handle GET /bookings/:id" time="0.007">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 400
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/customer.route.test.js:82:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Customer routes Booking routes should handle POST /bookings" name="Customer routes Booking routes should handle POST /bookings" time="0.005">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 500
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/customer.route.test.js:96:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Customer routes Booking routes should handle PUT /bookings/:id" name="Customer routes Booking routes should handle PUT /bookings/:id" time="0.004">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 400
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/customer.route.test.js:110:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Customer routes Booking routes should handle DELETE /bookings/:id" name="Customer routes Booking routes should handle DELETE /bookings/:id" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 400
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/customer.route.test.js:123:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Customer routes Journey routes should handle GET /journeys" name="Customer routes Journey routes should handle GET /journeys" time="5.001">
      <failure>Error: thrown: &quot;Exceeded timeout of 5000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at it (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/customer.route.test.js:128:5)
    at _dispatchDescribe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:604:26)
    at describe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:572:44)
    at describe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/customer.route.test.js:127:3)
    at _dispatchDescribe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:604:26)
    at describe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:572:44)
    at Object.describe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/customer.route.test.js:18:1)
    at Runtime._execModule (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runtime/build/index.js:1264:24)
    at Runtime._loadModule (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runtime/build/index.js:940:12)
    at Runtime.requireModule (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runtime/build/index.js:828:12)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:95:13)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)</failure>
    </testcase>
    <testcase classname="Customer routes Journey routes should handle GET /journeys/:id" name="Customer routes Journey routes should handle GET /journeys/:id" time="5.01">
      <failure>Error: thrown: &quot;Exceeded timeout of 5000 ms for a test.
Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.&quot;
    at it (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/customer.route.test.js:141:5)
    at _dispatchDescribe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:604:26)
    at describe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:572:44)
    at describe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/customer.route.test.js:127:3)
    at _dispatchDescribe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:604:26)
    at describe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/jestAdapterInit.js:572:44)
    at Object.describe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/customer.route.test.js:18:1)
    at Runtime._execModule (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runtime/build/index.js:1264:24)
    at Runtime._loadModule (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runtime/build/index.js:940:12)
    at Runtime.requireModule (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runtime/build/index.js:828:12)
    at jestAdapter (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-circus/build/runner.js:95:13)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at runTestInternal (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:272:16)
    at runTest (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:340:7)
    at Object.worker (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/node_modules/jest-runner/build/testWorker.js:494:12)</failure>
    </testcase>
    <testcase classname="Customer routes Account routes should handle DELETE /account" name="Customer routes Account routes should handle DELETE /account" time="0.027">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 500
    at Object.toBe (/Users/farid/Desktop/Projects/Team/YabaIT/KizunaTravelOS/apps/erp-api/src/routes/__test__/customer.route.test.js:166:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Booking Model" errors="0" failures="0" skipped="0" timestamp="2025-08-19T18:25:15" time="13.469" tests="25">
    <testcase classname="Booking Model Schema Definition should create a booking with required fields" name="Booking Model Schema Definition should create a booking with required fields" time="0.624">
    </testcase>
    <testcase classname="Booking Model Schema Definition should set default values correctly" name="Booking Model Schema Definition should set default values correctly" time="0.628">
    </testcase>
    <testcase classname="Booking Model Validation should require customerId" name="Booking Model Validation should require customerId" time="0.593">
    </testcase>
    <testcase classname="Booking Model Validation should require journeyId" name="Booking Model Validation should require journeyId" time="0.539">
    </testcase>
    <testcase classname="Booking Model Validation should require travelDate" name="Booking Model Validation should require travelDate" time="0.533">
    </testcase>
    <testcase classname="Booking Model Validation should require passengers" name="Booking Model Validation should require passengers" time="0.532">
    </testcase>
    <testcase classname="Booking Model Validation should require basePrice" name="Booking Model Validation should require basePrice" time="0.523">
    </testcase>
    <testcase classname="Booking Model Validation should validate basePrice minimum value" name="Booking Model Validation should validate basePrice minimum value" time="0.508">
    </testcase>
    <testcase classname="Booking Model Validation should validate discount minimum value" name="Booking Model Validation should validate discount minimum value" time="0.51">
    </testcase>
    <testcase classname="Booking Model Validation should validate status enum" name="Booking Model Validation should validate status enum" time="0.529">
    </testcase>
    <testcase classname="Booking Model Validation should validate paymentStatus enum" name="Booking Model Validation should validate paymentStatus enum" time="0.529">
    </testcase>
    <testcase classname="Booking Model Validation should validate passenger information" name="Booking Model Validation should validate passenger information" time="0.51">
    </testcase>
    <testcase classname="Booking Model Virtuals should calculate duration correctly" name="Booking Model Virtuals should calculate duration correctly" time="0.521">
    </testcase>
    <testcase classname="Booking Model Virtuals should calculate passenger count correctly" name="Booking Model Virtuals should calculate passenger count correctly" time="0.518">
    </testcase>
    <testcase classname="Booking Model Instance Methods should cancel booking correctly" name="Booking Model Instance Methods should cancel booking correctly" time="0.518">
    </testcase>
    <testcase classname="Booking Model Instance Methods should process payment correctly" name="Booking Model Instance Methods should process payment correctly" time="0.52">
    </testcase>
    <testcase classname="Booking Model Static Methods should get booking statistics" name="Booking Model Static Methods should get booking statistics" time="0.527">
    </testcase>
    <testcase classname="Booking Model Pre-save Middleware should update meta timestamps and version" name="Booking Model Pre-save Middleware should update meta timestamps and version" time="0.525">
    </testcase>
    <testcase classname="Booking Model Pre-save Middleware should calculate total price on save" name="Booking Model Pre-save Middleware should calculate total price on save" time="0.519">
    </testcase>
    <testcase classname="Booking Model Pre-find Middleware should exclude deleted records by default" name="Booking Model Pre-find Middleware should exclude deleted records by default" time="0.523">
    </testcase>
    <testcase classname="Booking Model Pre-find Middleware should include deleted records when explicitly requested" name="Booking Model Pre-find Middleware should include deleted records when explicitly requested" time="0.519">
    </testcase>
    <testcase classname="Booking Model Edge Cases should handle complex passenger information" name="Booking Model Edge Cases should handle complex passenger information" time="0.518">
    </testcase>
    <testcase classname="Booking Model Edge Cases should handle missing optional fields gracefully" name="Booking Model Edge Cases should handle missing optional fields gracefully" time="0.518">
    </testcase>
    <testcase classname="Booking Model Edge Cases should handle future travel dates" name="Booking Model Edge Cases should handle future travel dates" time="0.517">
    </testcase>
    <testcase classname="Booking Model Edge Cases should handle past travel dates" name="Booking Model Edge Cases should handle past travel dates" time="0.52">
    </testcase>
  </testsuite>
</testsuites>